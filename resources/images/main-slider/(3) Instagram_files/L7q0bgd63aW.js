;/*FB_PKG_DELIM*/

__d("EBEnableUnifiedAttachment",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEbEnableUnifiedAttachment=a;f.getEbEnableUnifiedAttachment=b}),66);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]);a=function(){function a(){}var b=a.prototype;b.handle=function(a){i.debug("Running default reenrollment trigger handler for reason: "+(h||(h=d("LSIntEnum"))).toNumber(a.deviceReenrollmentReason));for(a of c("MWEncryptedBackupsLocalStorageEntryEnum").members())i.debug("Clearing local storage key: "+a),a!==c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&d("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(a)};return a}();g.DefaultEBReenrollmentTriggerHandler=a}),98);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(){function a(a){this.$1=new Map(),this.$4=new(d("EBReenrollmentTriggerHandler").DefaultEBReenrollmentTriggerHandler)(),this.$2=a,this.$5()}var b=a.prototype;b.$5=function(){var a=this;this.$3==null&&(this.$3=d("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(b,e){if(e.operation==="add"||e.operation==="put"){(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");b=a.getDefaultHandler();if(e.value.deviceReenrollmentReason!=null){var g;b=(g=a.$1.get((i||(i=d("LSIntEnum"))).unwrapIntEnum(e.value.deviceReenrollmentReason)))!=null?g:b}b.handle(e.value);c("promiseDone")(a.$2.runInTransaction(function(a){return a.encrypted_backups_reenrollment_trigger["delete"](e.value.pk)},"readwrite",void 0,void 0,f.id+":77"))}}));return this.$3};b.attachHandler=function(a,b){this.$1.set(a,b)};b.getDefaultHandler=function(){return this.$4};return a}(),k;function l(a){if(k!=null)return k;k=new j(a);return k}function a(a){k==null&&l(a);return k}g.initEBReenrollmentTriggerListener=l;g.getEBReenrollmentTriggerListener_TESTING_ONLY=a}),98);
__d("EBUnifyLegacyMediaUpload",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEnableUnifyLegacyMediaUpload=a;f.getEnableUnifyLegacyMediaUpload=b}),66);
__d("EncryptedBackupTaskIssuedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5726");b=d("FalcoLoggerInternal").create("encrypted_backup_task_issued",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupsDYITypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({NotStarted:0,InProgress:1,Completed:2,Failed:3});c=b("$InternalEnum")({Armadillo:0,Instamadillo:1});f.EncryptedBackupsDYIState=a;f.EncryptedBackupsDYIConfig=c}),66);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";f=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};var h=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};function a(a,b,c,d,e){d={frankingTag:d==null?void 0:d.frankingTag,reportingTag:d==null?void 0:d.reportingTag};d={frankingMetadata:d,messageId:b,senderId:a,timestampMs:c};return{encryptedTransportMessage:e,metadata:d}}function b(a){return JSON.stringify([a.author,a.chat,a.externalId])}function e(a){a=JSON.parse(a);if(!Array.isArray(a))throw c("FBLogger")("wmi_eb").mustfixThrow("Unable to parse msg id string as proper json");if(a.length!==3)throw c("FBLogger")("wmi_eb").mustfixThrow("Parsed array should have 3 components");var b=d("WAJids").unsafeCoerceToUserJid(a[0]),e=d("WAJids").unsafeCoerceToChatJid(a[1]);a=d("WAStanzaUtils").toStanzaId(a[2]);return{author:b,chat:e,externalId:a}}g.entryOlderThan30Days=f;g.timestampOlderThan30Days=h;g.asBackupMessage=a;g.convertWAMsgIdToStringId=b;g.convertStringIdToWAMsgId=e}),98);
__d("MAWExtractMsFromExternalId",["I64","MAWExternalId","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=2199023255551;function a(a){try{a=(i||(i=d("I64"))).of_string_opt(a);if(a!=null){return(a=k(a))!=null?a:0}}catch(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert externalId to number: ",""])),a)}return 0}function k(a){a=Number((i||(i=d("I64"))).to_string(i.and_(i.lsr_(a,22),i.of_float(j))));return d("MAWExternalId").getThreeMostSignificantDigitsForSortOrderTimestamp(a)}g.extractMsFromStanzaId=a;g.extractMsFromExternalId=k}),98);
__d("IGDWEBUploadMessageUtils",["I64","MAWExtractMsFromExternalId","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var c=d("MAWExtractMsFromExternalId").extractMsFromExternalId((i||(i=d("I64"))).of_string(a));c==null&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Could not extract ms from externalId: ",""])),a);return d("WATimeUtils").castToMillisTime(Number(b)*1e3+(c!=null?c:0))}g.generateProtobufServerTs=a}),98);
__d("WAArmadilloBackupCommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.name="Subprotocol";a.internalSpec={payload:[1,d("WAProtoConst").TYPES.BYTES],version:[2,d("WAProtoConst").TYPES.INT32]};g.SubprotocolSpec=a}),98);
__d("WAArmadilloBackupMessage.pb",["WAArmadilloBackupCommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.name="BackupMessage";a.internalSpec={metadata:[1,(e=d("WAProtoConst")).TYPES.MESSAGE,b],encryptedTransportMessage:[2,e.TYPES.BYTES],encryptedTransportEvent:[5,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],encryptedTransportLocallyTransformedMessage:[6,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],miTransportAdminMessage:[7,e.TYPES.MESSAGE,d("WAArmadilloBackupCommon.pb").SubprotocolSpec],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage","miTransportAdminMessage"]}};b.name="BackupMessage$Metadata";b.internalSpec={senderId:[1,e.TYPES.STRING],messageId:[2,e.TYPES.STRING],timestampMs:[3,e.TYPES.INT64],frankingMetadata:[4,e.TYPES.MESSAGE,c],payloadVersion:[5,e.TYPES.INT32],futureProofBehavior:[6,e.TYPES.INT32],threadTypeTag:[7,e.TYPES.INT32],clientTimestampMs:[8,e.TYPES.INT64]};c.name="BackupMessage$Metadata$FrankingMetadata";c.internalSpec={frankingTag:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES]};g.BackupMessageSpec=a;g.BackupMessage$MetadataSpec=b;g.BackupMessage$Metadata$FrankingMetadataSpec=c}),98);
__d("WAByteArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);
__d("EncryptedBackupsUploadEntity",["$InternalEnum","EncryptedBackupsUtils","IGDWEBUploadMessageUtils","WAArmadilloBackupMessage.pb","WAByteArray","WAGlobals","WAJids","WATimeUtils","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a instanceof ArrayBuffer?new Uint8Array(a):a}var h=b("$InternalEnum").Mirrored(["NEEDS_BACKUP","COMPLETED","NEEDS_BACKUP_RETRY","PERMANENT_FAILURE","EXPIRED","THREAD_DELETED","DELETION_PURGED","MESSAGE_DELETED","UPLOADING"]);b=b("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});function c(a){return a}function i(a){var b=a.messageApplication,c=a.msgId,e=a.reportingMeta;a=a.sortOrderMs;var f=d("WAJids").authorToUserId(c.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()));return d("encodeProtobuf").encodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,d("EncryptedBackupsUtils").asBackupMessage(f,c.externalId,a,e!=null?e:{frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null},b)).readByteArrayView()}function e(a){return d("WAByteArray").uint8ArrayToBuffer(a)}function f(a){var b=a.attachmentContext,c=a.backupDirective,e=a.dbMsgType,f=a.instanceKey,g=a.isOpenEB,j=a.isRetroactiveUpload,k=a.legacyAttachmentContext,l=a.messageApplication,m=a.msgId,n=a.originalMsgProtocolId,o=a.reportingMeta,p=a.retryCount,q=a.senderId,r=a.serverTs,s=a.sortOrderMs,t=a.tags;a=a.triggerSource;l=i({messageApplication:l,msgId:m,reportingMeta:o,sortOrderMs:c.actionType===4?d("IGDWEBUploadMessageUtils").generateProtobufServerTs(m.externalId,r):s});o={backupActionType:c.actionType,backupDirective:c,dbMsgType:e,failTsMs:d("WATimeUtils").castToMillisTime(0),instanceKey:f,isOpenEB:g,isRetroactiveUpload:j,msgId:m,msgIdKey:d("EncryptedBackupsUtils").convertWAMsgIdToStringId(m),msgType:"text",originalMsgProtocolId:n,protobuf:l,retryCount:p,senderId:q,serverTs:r,sortOrderMs:s,supplementalKey:c.supplementalKey,tags:t,triggerSource:a,uploadStatus:h.NEEDS_BACKUP,uploadTsSec:d("WATimeUtils").unixTime()};b!=null&&(o=babelHelpers["extends"]({},o,{attachmentContext:b,legacyAttachmentContext:k,msgType:"media"}));return o}g.toEbBackupMessageBytes=a;g.EbUploadStatus=h;g.AttachmentContextMediaType=b;g.castToEBQueueId=c;g.encodeBackupMessage=i;g.getEbBackupMessageBytesBuffer=e;g.asEBUploadEntity=f}),98);
__d("EphemeralMediaViewMode",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f["default"]=a}),66);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactIdType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f["default"]=a}),66);
__d("LSContactUserBlockAction",[],(function(a,b,c,d,e,f){a=Object.freeze({MN_UNBLOCK:0,MN_BLOCK:1,FB_UNBLOCK:2,FB_BLOCK:3});f["default"]=a}),66);
__d("LSContactViewerRelationship",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("LSDecryptProtobuf",["LSArrayGetObjectAt","LSBase64Decode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptProtobuf] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[8]=a[1]==null?c.i64.cast([0,0]):a[1],d[2]=c.i64.of_int32(a[3].length),c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return d[14]=d[12].get("epoch_anon_id"),d[15]=d[12].get("epoch_root_key"),d[16]=c.createArray(),d[26]=(d[16].push(c.i64.cast([0,32])),d[16]),c.i64.ge(d[8],c.i64.cast([0,3]))?c.resolve(d[17]=void 0):c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[17]=d[26]}])},function(e){return c.i64.ge(d[8],c.i64.cast([0,4]))?(d[26]="_",d[18]=["message_key_in_epoch",d[26],c.blobs.to_string(d[14]),d[26],"cipher_version",d[26],c.i64.to_string(d[8]),d[26],"thread",d[26],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,3]))?(d[27]="_",d[26]=["message_key_in_epoch",d[27],c.blobs.to_string(d[14]),d[27],"cipher_version",d[27],c.i64.to_string(d[8]),d[27],"thread",d[27],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,2]))?(d[28]="_",d[27]=["message_key_in_epoch",d[28],c.blobs.to_string(d[14]),d[28],"cipher_version",d[28],c.i64.to_string(d[8])].join("")):d[27]=["message_key_in_epoch","_",c.blobs.to_string(d[14])].join(""),d[26]=d[27]),d[18]=d[26]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],d[17],d[15],d[16]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return d[22]=d[26]}])},function(e){return c.blobs.neq(d[22],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[0]).then(function(a){return a=a,d[26]=a[0],a})},function(e){return c.blobs.neq(d[26],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedData.nop"),d[22],c.blobs.of_string(["message_thread","_",a[2]].join("")),d[26]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[27]=d[29]}]):c.resolve(d[27]=void 0)},function(a){return c.blobs.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[29]=["Failed to decrypt message. Epoch Anon ID: ",c.blobs.to_string(d[14]),", Encryption Version: ",c.i64.to_string(d[8])].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] ","",d[29]].join("")),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure",[d[29]].join(""),d[30],c.i64.cast([0,3]))},function(a){return d[28]=void 0}])},function(a){return d[23]=d[28]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] Decryption message key is null"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure","Decryption message key is null",d[26],c.i64.cast([0,3]))},function(a){return d[23]=void 0}])},function(a){return c.blobs.neq(d[23],void 0)?(a=[d[23],void 0],d[24]=a[0],d[25]=a[1],a):(d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,101])),d[26].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[26].set("error_message",""),a=[void 0,d[26]],d[24]=a[0],d[25]=a[1]),a=[d[24],d[25]],d[3]=a[0],d[4]=a[1]}]):c.resolve((d[12]=c.i64.of_int32(a[3].length),c.i64.eq(d[12],c.i64.cast([0,0]))?(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,102])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1]):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,103])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1]),e=[d[13],d[14]],d[3]=e[0],d[4]=e[1]))},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[11]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptProtobuf] ",d[7],d[9],d[7],d[10],d[7],d[11]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptProtobuf",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptProtobufStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSHotEmojiSize",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});f["default"]=a}),66);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSVerifyContactRowExists"),e.id,e.contactIdType,e.profilePictureUrl,e.name,e.contactType,e.profilePictureFallbackUrl,e.profilePictureUrlExpirationTimestampMs,e.urlExpirationTimestampMs,e.normalizedNameForSearch,e.isMemorialized,e.isBlocked,e.blockedByViewerStatus,e.canViewerMessage,e.isSelf,e.authorityLevel,e.capabilities,e.capabilities2,e.workForeignEntityType,e.gender,e.contactViewerRelationship,e.secondaryName,e.firstName,e.friendshipStatus);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(a,b,c,d,e,f,g){"use strict";var h,i={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function a(a){return a>0}function b(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(0);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(1);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(2);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(5);default:return(h||(h=d("LSIntEnum"))).ofNumber(4)}}function e(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NONE);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SERVER_RECEIVED);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").RETRIABLE_ERROR);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}g.ACK=i;g.isMsgAuthoritative=a;g.levelToMessagingSendStatusV2=b;g.levelToMessagingSendStatus=e}),98);
__d("WAAckLevel",[],(function(a,b,c,d,e,f){"use strict";a={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};f.ACK=a}),66);
__d("MAWAdminMsgHelpers",["MAWCreateParticipantAdminMsg","MAWExternalId","MAWRemoveParticipantAdminMsg","WAAckLevel","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h="Facebook User",i=1;function a(a){return a==null||a===""?h:a}function b(a){return a!=null?d("WAJids").userIdFromJid(a):h}function c(a,b,c,e){return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:d("MAWCreateParticipantAdminMsg").createParticipantAdminMessage(c==="@me"?d("WAGlobals").getMyUserJid():c,b),serverTs:e,ts:e,type:"Admin"}}function e(a,b,c,e){return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:d("MAWRemoveParticipantAdminMsg").removeParticipantAdminMessage(c==="@me"?d("WAGlobals").getMyUserJid():c,b),serverTs:e,ts:e,type:"Admin"}}function f(a,b){return babelHelpers["extends"]({},j(a,b),{version:i})}function j(a,b){var c,e=d("WAGlobals").getMyUserJid();b=b==="@me"?e:b;if(b===e)c={adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"currentUserPromotedParticipant"};else if(b==null)c=a===e?{adminMsgContent:[],adminType:"currentUserGotPromoted"}:{adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"participantGotPromoted"};else{b=d("WAJids").userIdFromJid(b);c=a===e?{adminMsgContent:[b],adminType:"participantPromotedYou"}:{adminMsgContent:[b,d("WAJids").userIdFromJid(a)],adminType:"participantPromotedParticipant"}}return c}function k(a,b,c,e){b=j(b,c);return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:b,serverTs:e,ts:e,type:"Admin"}}function l(a,b){return babelHelpers["extends"]({},m(a,b),{version:i})}function m(a,b){var c,e=d("WAGlobals").getMyUserJid();b=b==="@me"?e:b;if(b===e)c=a===e?{adminMsgContent:[],adminType:"currentUserSelfDemoted"}:{adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"currentUserDemotedParticipant"};else if(b==null)c=a===e?{adminMsgContent:[],adminType:"currentUserGotDemoted"}:{adminMsgContent:[d("WAJids").userIdFromJid(a)],adminType:"participantGotDemoted"};else{var f=d("WAJids").userIdFromJid(b);c=a===e?{adminMsgContent:[f],adminType:"participantDemotedYou"}:{adminMsgContent:[f,d("WAJids").userIdFromJid(a)],adminType:b===a?"participantSelfDemoted":"participantDemotedParticipant"}}return c}function n(a,b,c,e){b=m(b,c);return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:b,serverTs:e,ts:e,type:"Admin"}}function o(a,b,c,e){var f=[],g=b.subject.content;if(g==null)return;b.subject.user===d("WAGlobals").getMyUserJid()?(b="currentUserNamedGroup",f.push(g)):c==null?(b="unkonwnUserNamedGroup",f.push(g)):(b="participantNamedGroup",f.push(c,g));return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:f,adminType:b},serverTs:e,ts:e,type:"Admin"}}function p(a,b){a=q(a,b);if(a==null)return;return babelHelpers["extends"]({},a,{version:i})}function q(a,b){var c,e=[];if(a===d("WAGlobals").getMyUserJid())switch(b){case"all_member_add":c="currentUserSetAddModeAllMembers";break;case"admin_add":c="currentUserSetAddModeAdminOnly";break}else if(a!=null){e.push(d("WAJids").userIdFromJid(a));switch(b){case"all_member_add":c="participantSetAddModeAllMembers";break;case"admin_add":c="participantSetAddModeAdminOnly";break}}else switch(b){case"all_member_add":c="serverSetAddModeAllMembers";break;case"admin_add":c="serverSetAddModeAdminOnly";break}if(c==null)return;return{adminMsgContent:e,adminType:c}}function r(a,b,c,e){c=q(c,b);if(c==null)return;return{ack:d("WAAckLevel").ACK.SENT,id:{author:d("WAJids").AUTHOR_SYSTEM,chat:a,externalId:d("MAWExternalId").generateExternalId()},msgContent:c,serverTs:e,ts:e,type:"Admin"}}g.UNKNOWN_USER=h;g.maybeUnknownParticipantName=a;g.createAdminMsgContactId=b;g.createParticipantAddAdminMessage=c;g.createParticipantRemoveAdminMsg=e;g.createParticipantPromoteAdminMessage=f;g.createParticipantPromoteAdminMsg=k;g.createParticipantDemoteAdminMessage=l;g.createParticipantDemoteAdminMsg=n;g.createGroupNameChangeAdminMsg=o;g.createMemberAddModeChangeAdminMessage=p;g.createMemberAddModeChangeAdminMsg=r}),98);
__d("MAWCreateParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:"participantAddedYou"};case 2:return{adminMsgContent:[b,c],adminType:"participantAddedYouAndOneUser"};default:return{adminMsgContent:[b,a.toString()],adminType:"participantAddedYouAndMoreThanOneUsers"}}}function i(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:"currentUserAddedOneParticipant"};case 2:return{adminMsgContent:[b,c],adminType:"currentUserAddedTwoParticipant"};default:return{adminMsgContent:[b,a.toString()],adminType:"currentUserAddedMoreThanTwoParticipant"}}}function j(a,b,c,d){switch(a){case 1:return{adminMsgContent:[b,c],adminType:"participantAddedOneUser"};case 2:return{adminMsgContent:[b,c,d],adminType:"participantAddedTwoUser"}}return{adminMsgContent:[b,c,a.toString()],adminType:"participantAddedMoreThanTwoUser"}}function a(a,b,c,e){e=e==null?b.map(d("MAWAdminMsgHelpers").createAdminMsgContactId):e;var f=e[0];e=e[1];c=c==null?d("MAWAdminMsgHelpers").createAdminMsgContactId(a):d("MAWAdminMsgHelpers").maybeUnknownParticipantName(c);if(a===d("WAGlobals").getMyUserJid())return i(b.length,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e));return b.includes(d("WAGlobals").getMyUserJid())?h(b.length,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(c),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(b[0]===d("WAGlobals").getMyUserJid()?e:f)):j(b.length,c,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e))}g.createParticipantAdminMessage=a}),98);
__d("MAWRemoveParticipantAdminMsg",["MAWAdminMsgHelpers","WAGlobals"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){switch(a){case 1:return{adminMsgContent:[b],adminType:"participantRemovedYou"};case 2:return{adminMsgContent:[b,c],adminType:"participantRemovedYouAndOneUser"};default:return{adminMsgContent:[b,a.toString()],adminType:"participantRemovedYouAndMoreThanOneUsers"}}}function i(a,b,c,d){switch(a){case 1:return d?{adminMsgContent:[],adminType:"currentUserLeftGroup"}:{adminMsgContent:[b],adminType:"currentUserRemovedOneParticipant"};case 2:return{adminMsgContent:[b,c],adminType:"currentUserRemovedTwoParticipant"};default:return{adminMsgContent:[b,a.toString()],adminType:"currentUserRemovedMoreThanTwoParticipant"}}}function j(a,b,c,d,e){switch(a){case 1:return e?{adminMsgContent:[b],adminType:"participantLeftGroup"}:{adminMsgContent:[b,c],adminType:"participantRemovedOneUser"};case 2:return{adminMsgContent:[b,c,d],adminType:"participantRemovedTwoUser"}}return{adminMsgContent:[b,c,a.toString()],adminType:"participantRemovedMoreThanTwoUser"}}function a(a,b,c,e){e=e==null?b.map(d("MAWAdminMsgHelpers").createAdminMsgContactId):e;var f=e[0];e=e[1];c=c==null?d("MAWAdminMsgHelpers").createAdminMsgContactId(a):d("MAWAdminMsgHelpers").maybeUnknownParticipantName(c);if(a===d("WAGlobals").getMyUserJid())return i(b.length,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e),b[0]===d("WAGlobals").getMyUserJid());return b.includes(d("WAGlobals").getMyUserJid())?h(b.length,c,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(b[0]===d("WAGlobals").getMyUserJid()?e:f)):j(b.length,c,d("MAWAdminMsgHelpers").maybeUnknownParticipantName(f),d("MAWAdminMsgHelpers").maybeUnknownParticipantName(e),b[0]===a)}g.removeParticipantAdminMessage=a}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:a=b[0];c=b[1];e=b[2];return{contactIds:[a],contents:[c,e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:a=b[0];c=b[1];b[2];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:e=b[0];a=b[1];c=b[2];b[3];return{contactIds:[e],contents:[a,c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case d("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";b=[(a=d("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE];c=[a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME,a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD,a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN];e=[a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,a.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE];f=[a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS];d=[a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER];var h=[a.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,a.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,a.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS],i=[a.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP],j=[a.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,a.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME],k=[a.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME,a.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],l=[a.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,a.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],m=[a.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED,a.LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED,a.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED,a.LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED],n=[a.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,a.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],o=[a.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],p=[a.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK,a.LOCALIZATION_TYPE.RTC_XMA_FALLBACK],q=[a.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,a.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],r=[a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],s=[a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],t=[a.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],u=[a.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],v=[a.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,a.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,a.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,a.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],w=[a.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,a.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,a.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,a.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,a.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],x=[a.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,a.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,a.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT];a=[a.LOCALIZATION_TYPE.EMPTY_SNIPPET];g.cutoverAdminMsgs=b;g.dualThreadCutoverAdminMsgs=c;g.deviceChanges=e;g.currentUserAddRemoveParticipant=f;g.otherUserAddRemoveParticipant=d;g.groupPermissionsChanged=h;g.participantLeftGroup=i;g.chatCustomizedByCurrentUser=j;g.chatCustomizedByOtherUser=k;g.pinnedMessageUpdate=l;g.limitSharingUpdate=m;g.twoUsersConnected=n;g.fallbackMsgFromCurrentUser=o;g.fallbackMsgFromOtherUser=p;g.currentUserBumpsMessage=q;g.otherUserBumpsMessage=r;g.ephemeralSettingChanges=s;g.icdcAlerts=t;g.callActionToNotifyAbout=u;g.callActionNotToNotifyAbout=v;g.otherNonAdminMsgToBeBumped=w;g.otherNonAdminMsgToBeMarkedAsUnread=x;g.otherNonAdminMsgToNotTriggerUpdate=a}),98);
__d("MAWAnimatedImageThumbnailStore",[],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){return(a=g.get(a))!=null?a:null}function b(a,b){g.set(a,b)}f.getThumbnailSpec=a;f.setThumbnailSpec=b}),66);
__d("MAWBlockUtils",["I64","LSContactUserBlockAction","LSIntEnum","LSThreadBitOffset","ReQL","asyncToGeneratorRuntime","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useCallback,m=[0,31,35,55,56,58,24,25,19,85],n=[0,31,35,55,56,58,24,25,19,85,8,22],o=[35,19,85,56,24,25];function a(){var a=(h||(h=c("useReStore")))();return l(function(e,g){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(e)));if(b==null)return;var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.threadKey).filter(function(a){return(i||(i=d("I64"))).equal(a.threadType,(j||(j=d("LSIntEnum"))).ofNumber(15))})));if(h==null)return;b=(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactUserBlockAction").MN_BLOCK))?d("LSThreadBitOffset").clear(m,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5):(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactUserBlockAction").FB_BLOCK))?d("LSThreadBitOffset").clear(n,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5):d("LSThreadBitOffset").set(o,h.capabilities,h.capabilities2,h.capabilities3,h.capabilities4,h.capabilities5);var k=b[0],l=b[1];yield a.runInTransaction(function(a){var b=babelHelpers["extends"]({},h,{capabilities:k,capabilities2:l});return a.threads.put(b)},"readwrite",void 0,void 0,f.id+":137")})())},[a])}g.clearedMnBlockCapabilities=m;g.clearedFbBlockCapabilities=n;g.useChangeThreadBlockCapabilities=a}),98);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof self.BigInt==="function",i=c("justknobx")._("3427")*1e3;function a(a,b){var e=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);a=d("MAWSendQplToServer").startQplUserFlow(c("qpl")._(1056840460,"718"),{bool:{has_big_int_support:h},string:{preprocess_type:a}},e,i);b&&a.addAnnotations({"int":{input_file_size:b.size},string:{mimetype:b.type}});return a}g.startMediaPreProcessQpl=a}),98);
__d("WABlobToArrayBuffer",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof a))};e.onerror=function(){var a;d((a=e.error)!=null?a:c("err")("blobToArrayBuffer got unknown error"))};e.readAsArrayBuffer(a)})}g.blobToArrayBuffer=a}),98);
__d("WABlobToImage",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c;return new(g||(g=b("Promise")))(function(b,d){c=new Image();var e=URL.createObjectURL(a),f=function(){return URL.revokeObjectURL(e)};c.onload=function(){b({image:c,releaseImageMemory:f})};c.onerror=function(){f(),d("loadBlobToImage error")};c.src=e})}f.blobToImage=a}),66);
__d("WACalculateBoundOutputSize",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b!=null?g(a.width,a.height,b.width,b.height):{outputWidth:a.width,outputHeight:a.height}}function g(a,b,c,d){var e=a,f=b;a>b?a>c&&(f*=c/e,e=c):f>d&&(e*=d/f,f=d);return{outputWidth:Math.round(Math.max(e,1)),outputHeight:Math.round(Math.max(f,1))}}f.calculateBoundOutputSize=a}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WATagsLogger").TAGS(["decodeImage"]);e=typeof self.createImageBitmap==="function"&&typeof self.OffscreenCanvas==="function";f=e?a:c;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){j.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),a.name);a=(yield self.createImageBitmap(a));var c=a.width,e=a.height;b=d("WACalculateBoundOutputSize").calculateBoundOutputSize({width:c,height:e},b);var f=b.outputWidth;b=b.outputHeight;var g=new self.OffscreenCanvas(f,b);g=m({canvas:g,inputWidth:c,inputHeight:e,outputWidth:f,outputHeight:b,image:a});return g});return k.apply(this,arguments)}function c(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){j.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),a.name);a=(yield d("WABlobToImage").blobToImage(a));var c=a.image;a=a.releaseImageMemory;var e=c.width,f=c.height;b=d("WACalculateBoundOutputSize").calculateBoundOutputSize({width:e,height:f},b);var g=b.outputWidth;b=b.outputHeight;var h=document.createElement("canvas");h=m({canvas:h,inputWidth:e,inputHeight:f,outputWidth:g,outputHeight:b,image:c});a();return h});return l.apply(this,arguments)}function m(a){var b=a.canvas,c=a.image,d=a.inputWidth,e=a.inputHeight,f=a.outputWidth;a=a.outputHeight;b.width=f;b.height=a;var g=b.getContext("2d");g.fillStyle="rgb(255,255,255)";g.fillRect(0,0,b.width,b.height);g.drawImage(c,0,0,d,e,0,0,f,a);b=g.getImageData(0,0,f,a);return b}g.canDecodeWithoutDOM=e;g.decodeImage=f;g.decodeImageWithoutDOM=a;g.decodeImageWithDOM=c}),98);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=null,g=new(h||(h=b("Promise")))(function(a,b){f=setTimeout(function(){b(new(d("WACustomError").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])["finally"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);
__d("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker_v1/init_script/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("WorkerBundleResource",["TrustedTypesWebWorkerScriptURLPolicy","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","getWorkerInitScriptSPINParams","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d,e,f,g=(d=b==null?void 0:b.logImportScriptsErrors)!=null?d:!1,i=(e=b==null?void 0:b.name)!=null?e:a.name,j=new window.URL(a.url,window.location.href).href;if(j==null){var k=new Error("Can't start up worker without a resource url.");k.stack;throw k}var l=c("nullthrows")((f=c("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(c("getWorkerInitScriptSPINParams")()))==null||(f=f.addQueryParams(h()))==null?void 0:f.toString()),m=new Worker(c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(l),{name:i});for(var n=arguments.length,o=new Array(n>2?n-2:0),p=2;p<n;p++)o[p-2]=arguments[p];m.postMessage({bundleUrl:j,initArgs:o,isDev:!1,resource:a,logImportScriptsErrors:g,type:"sr-init"});return m}function h(){var a=new URLSearchParams(window.location.search),b=new Map();a.forEach(function(a,c){["gk_enable","gk_enable[]","gk_disable","gk_disable[]"].includes(c)&&b.set(c,a)});return b}g.createDedicatedWebWorker=a}),98);
__d("WAMediaWasmWorkerClient",["Promise","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WATagsLogger","WorkerBundleResource","WorkerClient","WorkerMessagePort","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d("WATagsLogger").TAGS(["WAMediaWasmWorkerClient"]);c=d("WorkerBundleResource").createDedicatedWebWorker(c("WAMediaWasmWorkerResource"));var C=new(d("WorkerMessagePort").WorkerSyncedMessagePort)(c,"WAMediaWasmWorker");d("WorkerClient").init(C);B.DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["initiated."])));C.addMessageListener("log",function(a){var b=a.logType;a=a.message;switch(b){case"dev":B.DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),a);break;case"error":B.ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),a);break;default:b}});function a(a){var b=a.input;a=a.eventFlow;return I({operation:"webpCheck",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function e(a){var b=a.input;a=a.eventFlow;B.LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"])));return I({operation:"mp4RepairMux",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function f(a){var b=a.input;a=a.eventFlow;B.LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["transcodeToMp4InWorker processing video"])));return I({operation:"transcodeToMp4",input:d("WAByteArray").uint8ArrayToBuffer(b)},a)}function D(a){var b=a.imageData,c=a.quality,e=a.useHdScanConfig;a=a.eventFlow;return I({operation:"progressiveJpegEncode",input:d("WAByteArray").uint8ArrayToBuffer(b.data),height:b.height,width:b.width,quality:c,useHdScanConfig:e},a)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,c=a.quality,d=a.useHdScanConfig,e=a.eventFlow;a=a.maxOutputResolution;var f=(yield b.arrayBuffer());return I({operation:"progressiveJpegEncodeWithFile",input:f,fileName:b.name,fileType:b.type,quality:c,useHdScanConfig:d,maxOutputWidth:a==null?void 0:a.width,maxOutputHeight:a==null?void 0:a.height},e)});return F.apply(this,arguments)}function G(a){B.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),a),C.postMessage({type:"prewarm",operation:a})}var H=function(){var a=0;return function(){return++a}}();function I(a,b){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=H();B.LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),c);var e=(yield K(b));if(!e.success)return e;e=e.value;var f=e.onMessageOnce("mediaOperationResponse",function(a){return a.requestId===c}),g=a.input?[a.input]:void 0;e.postMessage(babelHelpers["extends"]({},a,{requestId:c,type:"mediaOperationRequest"}),g);b==null||b.addPoint("sent_request_to_media_worker_start");e=(yield f);a=e.output;if(a.success){B.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),c);b==null||b.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:a.value.isOpfsSyncSupported}});return d("WAResultOrError").makeResult(a.value.bytes)}B.ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),c,a.error.errorMessage);b==null||b.addPoint("sent_request_to_media_worker_fail");return d("WAResultOrError").makeError(a.error.errorType)});return J.apply(this,arguments)}function K(a){a==null||a.addPoint("get_connected_worker_port_start");var b=3e4;return d("WAPromiseTimeout").promiseTimeout(C.fullyConnected,b).then(function(b){a==null||a.addPoint("get_connected_worker_port_end");return d("WAResultOrError").makeResult(b)})["catch"](function(b){a==null||a.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:b instanceof d("WACustomError").TimeoutError?"timeout":"runtime-error"}});if(b instanceof d("WACustomError").TimeoutError)return d("WAResultOrError").makeError("worker-connection-timeout");B.ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),b);return d("WAResultOrError").makeError("worker-connection-runtime-error")})}function L(a){return M.apply(this,arguments)}function M(){M=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.file,e=a.maxDimension,f=a.thumbnailBlobByteSizeLimitBytes;a=a.thumbnailQualityPercentageWhenAboveByteSizeLimit;var g=H();B.LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),g);var h=(yield K());if(!h.success)return h;h=h.value;var i=h.onMessageOnce("mediaGenerateImageThumbnailResponse",function(a){return a.requestId===g}),j=(yield c.arrayBuffer()),k=j?[j]:void 0;h.postMessage({input:j,fileName:c.name,fileType:c.type,maxDimension:e,requestId:g,thumbnailBlobByteSizeLimitBytes:f,thumbnailQualityPercentageWhenAboveByteSizeLimit:a,type:"mediaGenerateImageThumbnailRequest"},k);h=(yield i);B.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),g,h.output.success);if(h.output.success)return d("WAResultOrError").makeResult(h.output.value);B.ERROR(t||(t=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),g,h.output.error.errorMessage);return(A||(A=b("Promise"))).reject(h.output.error.errorMessage)});return M.apply(this,arguments)}function N(a,b){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){B.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var c=H(),e=(yield K());if(!e.success)return d("WAResultOrError").makeError({errorName:"port-init",errorMessage:e.error});e=e.value;var f=e.onMessageOnce("mediaStorageShadowTestResponse",function(a){return a.requestId===c});e.postMessage({input:a,requestId:c,storageType:b,type:"mediaStorageShadowTestRequest"});e=(yield f);a=e.output;if(a.success){B.LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),c);return d("WAResultOrError").makeResult(a.value)}B.ERROR(w||(w=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),b,a.error);return d("WAResultOrError").makeError({errorName:a.error.errorName,errorMessage:a.error.errorMessage})});return O.apply(this,arguments)}function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.rawMimeType,c=a.input;a=a.eventFlow;var e=H();B.LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["start kaleidoscope classifiy in worker, requestId: ",""])),e);var f=(yield K(a));if(!f.success)return f;f=f.value;var g=f.onMessageOnce("kaleidoscopeClassifyResponse",function(a){return a.requestId===e});f.postMessage({rawMimeType:b,input:c,requestId:e,type:"kaleidoscopeClassifyRequest"});a==null||a.addPoint("sent_request_to_media_worker_start");f=(yield g);b=f.output;if(b.success){B.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),e);a==null||a.addPoint("sent_request_to_media_worker_end");return b}B.ERROR(z||(z=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscope classifiy error: ",", requestId: ",","])),b.error,e);a==null||a.addPoint("sent_request_to_media_worker_fail");return d("WAResultOrError").makeError(b.error)});return Q.apply(this,arguments)}g.webpCheckInWorker=a;g.mp4RepairMuxInWorker=e;g.transcodeToMp4InWorker=f;g.progressiveJpegEncodeInWorker=D;g.progressiveJpegEncodeInWorkerWithFile=E;g.prewarmMediaWasmWorker=G;g.getConnectedWorkerPortWithTimeout=K;g.generateImageThumbnailInWorker=L;g.runMediaStorageShadowTestWasmWorker=N;g.kaleidoscopeClassifyInWorker=P}),98);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues"],(function(a,b,c,d,e,f,g){"use strict";var h={file:null,photo:null,video:null},i={"image/gif":"video","image/webp":"video"};function j(a){return a.split(",").map(function(a){return a.trim()}).map(function(a){return a.replace(/\/\*$/,"/")})}function k(a,b,d){h[a]==null&&(h[a]=j(d));d=h[a];if(d==null)throw c("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var e=i[b];return e!=null?e===a:d.some(function(a){return b.startsWith(a)})}function a(a){return k("photo",a,d("UFICommentFileInputAcceptValues").photos)}function b(a){return k("video",a,d("UFICommentFileInputAcceptValues").videos)}function e(a){return k("file",a,d("UFICommentFileInputAcceptValues").files)}g.mimeTypeAcceptStringToArray=j;g.isMimeTypeForPhoto=a;g.isMimeTypeForVideo=b;g.isMimeTypeForFile=e}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","Promise","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p=12e4,q=d("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),r=85,s=["image/heic"];function e(a,e,f,g){g===!0?g={height:c("justknobx")._("187"),width:c("justknobx")._("187")}:g={height:c("justknobx")._("2144"),width:c("justknobx")._("2144")};var h;e?h=a.type==="image/webp"?(o||(o=b("Promise"))).resolve(a):v(a,"image/webp",e,f,g):h=a.type==="image/gif"?(o||(o=b("Promise"))).resolve(a):v(a,"image/jpeg",!1,f,g);f=a.type==="image/gif";return f?h.then(function(a){return(o||(o=b("Promise"))).all([d("MAWGetImageSpec").getImageSpec(a),a])}).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b[0];b=b[1];return{file:b,imageSpec:c,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(b),thumbnailUrlAndSpec:null,type:u(a,e)}});return function(a){return c.apply(this,arguments)}}()):h.then(function(e){return(o||(o=b("Promise"))).all([B(a,c("justknobx")._("2033")),d("MAWGetImageSpec").getImageSpec(e),e])}).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var f=c[0],g=c[1];c=c[2];return(o||(o=b("Promise"))).resolve({file:c,imageSpec:g,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(c),thumbnailUrlAndSpec:f,type:u(a,e)})});return function(a){return c.apply(this,arguments)}}())}function f(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){var f=a.URL.createObjectURL(b),g=e===!0?c("justknobx")._("2545"):c("justknobx")._("2033");g=(yield d("MAWImageUtils").urlToThumbnailSpec(f,g));var h={height:g.height,width:g.width};return{file:b,imageSpec:h,thumbnailSpec:g,type:u(b,e),url:f}});return t.apply(this,arguments)}function u(a,b){return b===!0?"sticker":a.type==="image/gif"?"animated_image":"image"}function v(a,b,c,d,e){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){q.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),a.name);var h=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",a);h.addAnnotations({"int":{total_number_of_files:f!=null?f:1},string:{targetMimetype:c}});var i=function(){return y(a,c,r,e,g).then(function(a){return a.success?a.value:(o||(o=b("Promise"))).reject("runtime-error")})["catch"](function(a){q.MUSTFIX(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(a));h.addPoint("native_encode_failure",{string:{native_encode_error:a.toString()}});return null})};f=c==="image/jpeg"?yield d("WAPromiseTimeout").promiseTimeout(z(a,r,h,g).then(function(a){return a.success?a.value:(o||(o=b("Promise"))).reject(a.error)}),p)["catch"](function(a){a instanceof d("WACustomError").TimeoutError?h.addPoint("mozjpeg_encode_timeout"):h.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:a.toString()}});return i()}):yield i();if(f==null){h.endFail("unable_to_transcode_image");throw q.mustfixThrow("unable to transcode image")}h.endSuccess({"int":{compressed_file_size:f.size}});return f});return w.apply(this,arguments)}function x(b,c){b=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToThumbnail(b,c)}function y(b,c,e,f,g){q.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var j=a.URL.createObjectURL(b),k=b.name;return d("MAWImageUtils").urlToFile(j,c,e,f,g).then(function(a){a=a.blob;q.DEBUG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),a.size);return d("WAResultOrError").makeResult(new File([a],k,{type:c}))})}function z(a,b,c,d){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){q.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),a.name);d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode");c.addPoint("prewarm_worker_started");var f;d("WADecodeImage").canDecodeWithoutDOM&&(f=(yield d("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:c,file:a,maxOutputResolution:e,quality:b,useHdScanConfig:!0})));if(f==null||!f.success&&f.error==="decode-image-error"){e=(yield d("WADecodeImage").decodeImageWithDOM(a,e)["catch"](function(a){c.addPoint("image_decode_failure");throw a}));c.addPoint("image_decode_success");f=(yield d("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:c,imageData:e,quality:b,useHdScanConfig:!0}))}if(!f.success)return f;c.addPoint("pjpeg_encode_success");q.DEBUG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),f.value.byteLength);return d("WAResultOrError").makeResult(new File([f.value],a.name,{type:"image/jpeg"}))});return A.apply(this,arguments)}function B(e,f){var g=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a.URL.createObjectURL(e),c=(yield d("MAWImageUtils").urlToThumbnail(b,f));a.URL.revokeObjectURL(b);return c});return function(){return c.apply(this,arguments)}}();if(!d("WADecodeImage").canDecodeWithoutDOM)return g();var h=c("justknobx")._("2338")*1024,i=c("justknobx")._("2340");return d("WAPromiseTimeout").promiseTimeout(d("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:e,maxDimension:f,thumbnailBlobByteSizeLimitBytes:h,thumbnailQualityPercentageWhenAboveByteSizeLimit:i}).then(function(a){if(!a.success)throw q.mustfixThrow("urlToFileInWorker error: "+a.error);return{height:a.value.height,jpegThumbnail:a.value.blob,width:a.value.width}})["catch"](function(a){q.catching(a).MUSTFIX(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"])));throw a}),p)["catch"](function(a){return g()})}function C(a){if(a==="image/gif"||a==="image/webp")return!0;return!d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)?!1:!s.includes(a)}g.imagePreprocess=e;g.optimisticImagePreprocess=f;g.getJpegThumbnailInfo=x;g.generateImageThumbnailInWorkerWithFallback=B;g.isSupportedImageFileType=C}),98);
__d("WAWebDataUrlToBlob",["err"],(function(a,b,c,d,e,f,g){var h=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function a(a){var b=a.match(h);if(!b)throw c("err")("invalid data URI");var d=b[2]?b[1]:"text/plain"+(b[3]||";charset=US-ASCII"),e=!!b[4];a=a.slice(b[0].length);e?b=atob(a):b=decodeURIComponent(a);e=new ArrayBuffer(b.length);a=new Uint8Array(e);for(e=0;e<b.length;e+=1)a[e]=b.charCodeAt(e);return new Blob([a],{type:d})}g.dataURLtoBlob=a}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="image/jpeg",j=100,k=c("justknobx")._("2338")*1024,l=c("justknobx")._("2340"),m=c("justknobx")._("2545");function n(a,d){d===void 0&&(d=!0);var e;return new(h||(h=b("Promise")))(function(b,f){e=new Image();var g=/^(?:data|blob):/.test(a);d&&!g&&e.setAttribute("crossOrigin","anonymous");e.onload=b;e.onabort=function(){f(c("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL"))};e.onerror=function(){f(c("FBLogger")("messenger_web").mustfixThrow("Wrong blob type"))};e.src=a}).then(function(){return e})}function o(a){return window.fetch(a,{cache:"no-store",method:"GET",mode:"cors"}).then(function(a){if(!a.ok)throw c("FBLogger")("messenger_web").mustfixThrow("Failed to fetch image: %s %s",a.status,a.statusText);return a.blob()}).then(function(a){return new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onloadend=function(){var a=new Image();a.onload=function(){b(a)};a.onerror=function(){d(function(){throw c("FBLogger")("messenger_web").mustfixThrow("Error loading image from blob data")})};typeof e.result==="string"?a.src=e.result:d(c("err")("FileReader result is not a string"))};e.onerror=function(){d(c("err")("Error reading blob as data URL"))};e.readAsDataURL(a)})})["catch"](function(b){throw c("FBLogger")("messenger_web").mustfixThrow("Failed to load image from URL: %s, %s",a,String(b))})}function p(a,c,e,f){e===void 0&&(e=!1);if(a.toBlob)return new(h||(h=b("Promise")))(function(b){var d=f==null?void 0:f/100;a.toBlob(b,c,d)}).then(function(d){var f=k,g=l/100;return e&&d.size>=f?new(h||(h=b("Promise")))(function(b){a.toBlob(b,c,g)}):d});else{var g;d("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var i=(g=d("WAWebDataUrlToBlob").dataURLtoBlob)!=null?g:window.dataURLtoBlob;return(h||(h=b("Promise"))).resolve(i(a.toDataURL(c))).then(function(d){var f=k,g=l/100;return e&&d.size>=f?(h||(h=b("Promise"))).resolve(i(a.toDataURL(c,g))):d})}}function q(a,e,f,g,i,j){j===void 0&&(j=!1);j=j?o(a):n(a);return j.then(function(a){var b=a.naturalWidth,c=a.naturalHeight,h=d("WACalculateBoundOutputSize").calculateBoundOutputSize({height:c,width:b},i),j=h.outputHeight,k=h.outputWidth;h=document.createElement("canvas");h.width=k;h.height=j;var l=h.getContext("2d");g!==!0&&s(h);l.drawImage(a,0,0,b,c,0,0,k,j);return p(h,e,!1,f).then(function(a){return{blob:a,height:j,width:k}})})["catch"](function(a){return(h||(h=b("Promise"))).reject(a!=null?a:c("err")("Error loading image from URL"))})}function a(a,b){return n(a).then(function(a){var c=document.createElement("canvas"),e=a.naturalWidth,f=a.naturalHeight,g=c.getContext("2d");f=t(f,e,b);c.width=f.width;c.height=f.height;var h=c.width,j=c.height;r(c);g.drawImage(a,0,0,h,j);return p(c,i,!0).then(function(a){return d("WABlobToArrayBuffer").blobToArrayBuffer(a).then(function(a){return{height:j,jpegThumbnail:a,width:h}})})})}function e(a,b){return n(a).then(function(a){a=t(a.naturalHeight,a.naturalWidth,b);return{height:a.height,width:a.width}})}function r(a){var b=a.getContext("2d");b.fillStyle="rgb(247,247,247)";b.fillRect(0,0,a.width,a.height)}function s(a){var b=a.getContext("2d");b.fillStyle="rgb(255,255,255)";b.fillRect(0,0,a.width,a.height)}function t(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c/b,b=c):a>c&&(b*=c/a,a=c);return{height:Math.round(Math.max(a,1)),width:Math.round(Math.max(b,1))}}function f(a){return n(a).then(function(a){return{height:a.naturalHeight,width:a.naturalWidth}})}function u(a,e,f,g){g===void 0&&(g=!1);var i=d("MAWAnimatedImageThumbnailStore").getThumbnailSpec(a);if(i)return(h||(h=b("Promise"))).resolve(i);i=q(a,"image/gif",void 0,void 0,void 0,g);return i==null?null:i.then(function(b){var c=new File([b.blob],"gif",{type:"image/gif"});return d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(c,Math.max(f!=null?f:b.width,e!=null?e:b.height)).then(function(b){d("MAWAnimatedImageThumbnailStore").setThumbnailSpec(a,b);return b})})["catch"](function(b){throw c("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF. URL: ",a,b)})}function v(a){var c=a==null?void 0:a.file,e=a==null?void 0:a.width,f=a==null?void 0:a.height;if(c==null||e==null||f==null)return(h||(h=b("Promise"))).resolve(a);var g=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(c.type,!0);g=g.mediaType;return g!==d("MAWDbMedia").MEDIA_TYPE.GIF?(h||(h=b("Promise"))).resolve(a):d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(c,Math.max(e,f)).then(function(a){var b=new File([a.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:b,height:a.height,width:a.width}})}g.TYPE_JPEG=i;g.IMG_THUMB_MAX_EDGE=j;g.STICKER_THUMBNAIL_MAX_SIZE=m;g.canvasToBlob=p;g.urlToFile=q;g.urlToThumbnail=a;g.urlToThumbnailSpec=e;g.boundHeightWidth=t;g.urlToImageSpec=f;g.generateGIFThumbnail=u;g.generatePreviewBlobForShare=v}),98);
__d("MAWGetImageSpec",["MAWImageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function c(b,c){var e=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToFile(e,c!=null?c:b.type).then(function(a){var b=a.height;a=a.width;return{height:b,width:a}})}function e(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=a.URL.createObjectURL(b);var c=(yield d("MAWImageUtils").urlToImageSpec(b));a.URL.revokeObjectURL(b);return c});return h.apply(this,arguments)}g.getImageSpec_DEPRECATED=c;g.getImageSpec=e}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15418")||d("MAWMpsGating").isMpsMessageRendering()}g.isQuotedMessagesInLsEnabled=a}),98);
__d("WAHashUtils",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function b(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function c(a){return a}function e(a){return a}function f(a){return""+a.slice(0,3)}g.toPlaintextHash=a;g.toCiphertextHash=b;g.stringToPlaintextHash=c;g.toHashedPlaintextHash=e;g.sanitisePlaintextHash=f}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.author,e=a.msgId;c=d("WAJids").authorToUserId(c,b);b=(b=a.quote)==null||(b=b.content.msgContent)==null?void 0:b.content;a=(a=a.quote)==null?void 0:a.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:a!=null?a*1e3:void 0,replyMessageText:b,replySourceId:e,replyToUserId:c}}g["default"]=a}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){if(!d("MsgrWebGating").isQuotedMessagesInLsEnabled())return;if(a.isForwarded===!0&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType))return{replyToMsgId:a.msgId,replyToUserId:d("WAJids").authorToUserId(a.author,b),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null};if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var c=a.threadJid;c=d("WAJids").interpretAsUserJid(c);var e;c!=null&&(e=d("WAJids").userIdFromJid(c));return d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)?{mentionedUserId:e!=null?e:b,replyType:"FB_POST_MENTION",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null}:{mentionedUserId:e!=null?e:b,replyType:"FB_STORY_MENTION",timestampMs:a.sortOrderMs!=null?d("WATimeUtils").castToMillisTime(a.sortOrderMs):null}}if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType))return;c=(c=a.quote)==null?void 0:c.content;if(c==null)return;var f=c.author,g=c.expirationTs,h=c.mediaId,i=c.msgContent,j=c.msgId,k=c.plaintextHash,l=c.sourceId,m=c.ts,n=c.type;c=c.xmaMessageType;f=d("WAJids").authorToUserId(f,b);if(n===d("WAMsgType").NOTE_REPLY)return{noteContent:i==null?void 0:i.content,replyMediaExpirationTimestampMs:g!=null?d("WATimeUtils").castToMillisTime(g*1e3):void 0,replyToMsgId:a.msgId,replyToUserId:f,replyType:"LIGHTWEIGHT_STATUS"};if(n===d("MAWMsgType").MSG_TYPE.XMA&&d("MAWXMAUtils").isXMAStoryReply(c)){if(l==null)return;b=d("MAWXMAUtils").isXMAStoryProducerReply(c);return b?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:h!=null?h:void 0,storyMediaPlaintextHash:k,storyMsgType:h!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:f,storyUrl:l,timestampMs:m!=null?d("WATimeUtils").castUnixTimeToMillisTime(m):null}:{replyType:"STORY",storyMediaPlaintextHash:k,storyOwnerId:f,storyUrl:l,timestampMs:m!=null?d("WATimeUtils").castUnixTimeToMillisTime(m):null}}if(j!=null)return{isBumpMsg:a.type===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:j,replyType:"MESSAGE"}}function k(a,b,e){var f,g;f=((f=a.quote)==null?void 0:f.content.type)===d("WAMsgType").NOTE_REPLY;if(f)return c("getReplyContentForNoteReply")(a,e);f=(f=a.quote)==null?void 0:f.content;if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var h=a.author,i=a.mediaId,j=a.msgId,k=d("WAJids").authorToUserId(h,e);if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType)){var l=a.threadJid,m;l!=null&&(m=d("WAJids").interpretAsUserJid(l));m!=null&&(k=d("WAJids").userIdFromJid(m))}i!=null&&a.plaintextHash==null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content");return{isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),isIGStoryMention:d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(a.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),isStoryHighlightShare:d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),isStoryReply:d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType),replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:i,replyPlaintextHash:(l=a.plaintextHash)!=null?l:void 0,replySenderIsMe:h===d("WAJids").AUTHOR_ME||k===e,replySourceId:j,replySourceTimestampMs:a.sortOrderMs,replyStatusType:i!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:k}}if(f==null||(f==null?void 0:f.msgId)==null&&(f==null?void 0:f.sourceId)==null)return;l=f||{};h=l.author;j=l.mediaId;a=l.msgId;i=l.plaintextHash;k=l.sourceId;var n=l.specialTextSize,o=l.ts,p=l.type;l=l.xmaMessageType;o=o!=null?o*1e3:void 0;g=f.type===d("MAWMsgType").MSG_TYPE.TEXT||d("MAWXMAUtils").isXMAExternalLinkShare(l)?(g=f.msgContent)==null?void 0:g.content:void 0;var q=d("WAJids").authorToUserId(h,e),r=f.type===d("MAWMsgType").MSG_TYPE.TEXT?f.msgContent.mentionedJids:void 0;h=h===d("WAJids").AUTHOR_ME||q===e;e=b||{};b=e.replyMediaId;var s=e.replyMediaPreviewHeight,t=e.replyMediaPreviewWidth,u=e.replyMediaUrlFallback,v=e.replyPlaintextHash;e=e.replyXMAId;if(d("MAWXMAUtils").isXMAStoryReply(l)){return{isStoryProducerReply:d("MAWXMAUtils").isXMAStoryProducerReply(l),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(l),isStoryReply:!0,replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:j,replyPlaintextHash:(f=v!=null?d("WAHashUtils").stringToPlaintextHash(v):i)!=null?f:void 0,replySenderIsMe:h,replySourceId:k,replySourceTimestampMs:o,replyStatusType:j!=null?d("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:q}}i=d("MAWImageUtils").boundHeightWidth(s,t,96*.8);f=i.height;k=i.width;return{isIGXMAPostShare:d("MAWXMAUtils").isIGXMAPostShare(l),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(l),isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:p===d("MAWMsgType").MSG_TYPE.STICKER?f:s,replyMediaPreviewWidth:p===d("MAWMsgType").MSG_TYPE.STICKER?k:t,replyMediaUrlFallback:u,replyMentionedJids:r,replyMessageText:g,replyPlaintextHash:v!=null?d("WAHashUtils").stringToPlaintextHash(v):void 0,replySenderIsMe:h,replySourceId:a,replySourceTimestampMs:o,replyStatusType:n===1||n===2||n===3?d("MAWMsgType").MSG_TYPE.STICKER:p,replyToUserId:q,replyXMAId:e}}function a(a){a=a.specialTextSize;switch(a){case 1:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL);case 2:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM);case 3:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE)}}function l(a){if(c("justknobx")._("3424")&&a==="media_restore")return"EncryptedBackupsMedia";switch(a){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return void 0}}function b(a,b,e){var f,g,i=d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid());f=((f=a.isForwarded)!=null?f:!1)&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER;g=(g=a.forwardingScore)!=null?g:0;var m=d("MAWDbMsg").getCanonicalTsFromMsg(a),n=k(a,b,i),o=j(a,i),p=d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType),q=d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),r=d("MAWXMAUtils").isXMAExternalLinkShare(a.xmaMessageType),s=d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),t=d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),u=d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),v=d("MAWXMAUtils").isXMAPostPrivateReply(a.xmaMessageType),w=d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),x=a.messageExpirationTs!=null&&a.messageExpirationTs<=d("WATimeUtils").unixTime(),y=d("MAWDbMsg").getSortOrderWithFallback(a),z=a.externalId,A=l(a.source);(b==null?void 0:b.replyPlaintextHash)!==(n==null?void 0:n.replyPlaintextHash)&&c("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(b==null?void 0:b.replyPlaintextHash)==null,(n==null?void 0:n.replyPlaintextHash)==null,a.type);b=(b==null?void 0:b.replyPlaintextHash)!=null?d("WAHashUtils").stringToPlaintextHash(b==null?void 0:b.replyPlaintextHash):(b=n==null?void 0:n.replyPlaintextHash)!=null?b:void 0;switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:var B=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:a.msgContent.commands,content:B,editCount:a.editCount,ephemeralDurationInSec:(B=a.ephemeralSetting)==null?void 0:B.ephemeralExpirationInSec,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,mentionedJids:a.msgContent.mentionedJids,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,specialTextSize:a.specialTextSize,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,ephemeralDurationInSec:(B=a.ephemeralSetting)==null?void 0:B.ephemeralExpirationInSec,externalId:z,forwardingScore:g,groupId:a.groupId,groupIndex:a.groupIndex,groupSize:a.groupSize,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type,unsupportedType:a.msgContent.subtype});case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:e,ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return{_META_loaded_as_quoted_msg:e,ack:a.ack,adminContent:(B=a.msgContent)==null||(B=B.adminMsgContent)==null?void 0:B.map(function(a){return a==="Facebook User"?"0":a}),adminType:(B=a.msgContent)==null?void 0:B.adminType,adminVersion:(B=a.msgContent)==null?void 0:B.version,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:e,ack:a.ack,chatJid:a.threadJid,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredMsg:x,isForwarded:f,msgId:a.msgId,originalTs:a.originalTs,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.XMA:var C;B=(B=a.msgContent)==null?void 0:B.content;C=B!=null?d("MAWVault").isVaulted(B)?(C=a.msgContent)==null?void 0:C.content:d("MAWVault").vault(B):void 0;r&&C==null&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));B=C;return babelHelpers["extends"]({},n,{_META_loaded_as_quoted_msg:e,ack:a.ack,applicationErrorCode:a.applicationErrorCode,chatJid:a.threadJid,commands:(r=a.msgContent)==null?void 0:r.commands,content:B,ephemeralDurationInSec:(C=a.ephemeralSetting)==null?void 0:C.ephemeralExpirationInSec,externalId:z,forwardingScore:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isCollapsed:a.isCollapsed,isExpiredMsg:x,isExpiredXmaMsg:a.isExpiredXmaMsg,isFBPostMention:d("MAWXMAUtils").isFBXMAPostMention(a.xmaMessageType),isFBStoryMention:t,isForwarded:f,isIGStoryMention:s,isMsgHighlightsTabFriendUpdatesReply:w,isPostPrivateReply:v,isStoryHighlightShare:u,isStoryReaction:q,isStoryShare:p,mentionedJids:(n=a.msgContent)==null?void 0:n.mentionedJids,msgId:a.msgId,replyContent:o,replyPlaintextHash:b,sender:d("WAJids").authorToUserId(a.author,i),sortOrderMs:y,transportKey:A,ts:m,type_:a.type,xmaMessageType:a.xmaMessageType});default:return c("WAAssertUnreachable")(a.type)}}g.getSpecialTextSize=a;g.convertDbMsgSourceToLSTransportKey=l;g.createBridgeMsg=b}),98);
__d("MAWMessageRequestUtil",["I64","LSContactBitOffset","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWFBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){if(a==="pending"||a==="other"){d("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is "+a+", contactViewerRelationship is "+(h||(h=d("I64"))).to_string(e.contactViewerRelationship));return!0}var f=d("LSContactBitOffset").hasWithDefault(64,e,!0);if(a==="inbox"&&(h||(h=d("I64"))).equal(e.contactViewerRelationship,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactViewerRelationship").NOT_CONTACT))&&!f){b&&d("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is inbox, contactViewerRelationship is "+(h||(h=d("I64"))).to_string(e.contactViewerRelationship)+", isViewerUnconnected is false, hasActivity is true");return b}return!1}function k(a){return a==="pending"||a==="other"}function a(a){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?k(a.folderName):!1}function l(a,b){return b!=null?j(a.folderName,(h||(h=d("I64"))).gt(a.lastActivityTimestampMs,h.zero),b[1]):!1}function b(a,b){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?l(a,b):!1}function e(a){return d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?k(a.folderName):!1}f=[8,18,19,34,24,25,122];var m=[21,48];g.isMessageRequestV2=j;g.isOneOnOneMessageRequest=a;g.isOneOnOneMessageRequestV2=b;g.isGroupMessageRequest=e;g.disabledThreadCapabilitiesForIncomingRequest=f;g.enabledThreadCapabilitiesForIncomingRequest=m}),98);
__d("clearedMAWMnRestrictCapabilities",[],(function(a,b,c,d,e,f){"use strict";a=[0,31,35,55,56,58,24,25,35,19];b=a;f["default"]=b}),66);
__d("MAWUpdateLSThreadCapabilities",["fbt","I64","LSBitOffset","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBlockUtils","MAWCurrentUser","MAWMessageRequestUtil","Promise","ReQL","asyncToGeneratorRuntime","clearedMAWMnRestrictCapabilities","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=d("MAWCurrentUser").getID(),m=(k||(k=d("I64"))).of_string(l);function a(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)).then(function(c){if(c==null)return(i||(i=b("Promise"))).resolve();var e=d("LSBitOffset").set((j||(j=d("LSIntEnum"))).ofNumber(27),c.capabilities);c=babelHelpers["extends"]({},c,{capabilities:e});return a.threads.put(c)}).then(c("emptyFunction"))}function e(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)).then(function(c){if(c==null)return(i||(i=b("Promise"))).resolve();var e=d("LSBitOffset").clear((j||(j=d("LSIntEnum"))).ofNumber(27),c.capabilities);c=babelHelpers["extends"]({},c,{capabilities:e});return a.threads.put(c)}).then(c("emptyFunction"))}function f(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e)).then(function(c){if(c==null)return(i||(i=b("Promise"))).resolve([void 0,void 0]);var f=d("ReQL").firstAsync(d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(a.participants).getKeyRange(e),d("ReQL").fromTableAscending(a.contacts)).filter(function(a){a=a[1];return!(k||(k=d("I64"))).equal(a.id,m)}).map(function(a){a=a[1];return a}):d("ReQL").empty());return(i||(i=b("Promise"))).all([i.resolve(c),f])}).then(function(e){var f=e[0];if(f==null)return(i||(i=b("Promise"))).resolve();e=e[1];if(e==null)return(i||(i=b("Promise"))).resolve();var g=(k||(k=d("I64"))).equal(e.blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)),h=k.equal(e.blockedByViewerStatus,j.ofNumber(c("LSContactBlockedByViewerStatus").FULLY_BLOCKED));e=d("LSContactBitOffset").has(66,e);h=h?d("LSThreadBitOffset").clear(d("MAWBlockUtils").clearedFbBlockCapabilities,f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5):g?d("LSThreadBitOffset").clear(d("MAWBlockUtils").clearedMnBlockCapabilities,f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5):e?d("LSThreadBitOffset").clear(c("clearedMAWMnRestrictCapabilities"),f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5):[f.capabilities,f.capabilities2,f.capabilities3,f.capabilities4,f.capabilities5];g=h[0];e=h[1];var l=h[2],m=h[3];h=h[4];return a.threads.put(babelHelpers["extends"]({},f,{capabilities:g,capabilities2:e,capabilities3:l,capabilities4:m,capabilities5:h})).then(c("emptyFunction"))})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=a.threads;c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(c)));if(c==null)return(i||(i=b("Promise"))).resolve();var e=d("LSThreadBitOffset").set.apply(d("LSThreadBitOffset"),[d("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest].concat(d("LSThreadBitOffset").clear(d("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,c.capabilities,c.capabilities2,c.capabilities3,c.capabilities4,c.capabilities5))),f=e[0],g=e[1],h=e[2],j=e[3];e=e[4];yield a.put(babelHelpers["extends"]({},c,{additionalThreadContext:void 0,capabilities:f,capabilities2:g,capabilities3:h,capabilities4:j,capabilities5:e}))});return o.apply(this,arguments)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)));if(b==null)return;c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.contacts,["name"]).getKeyRange(c)));if(c==null)return;c=h._(/*BTDS*/"{Inviter Name} invited you to join",[h._param("Inviter Name",c.name)]).toString();var e=d("LSThreadBitOffset").set([105],b.capabilities,b.capabilities2,b.capabilities3,b.capabilities4,b.capabilities5),f=e[0],g=e[1],i=e[2],j=e[3];e=e[4];yield a.threads.put(babelHelpers["extends"]({},b,{capabilities:f,capabilities2:g,capabilities3:i,capabilities4:j,capabilities5:e,snippet:c}))});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(c)));if(e==null)return;c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.group_invites).getKeyRange(c)));var f=d("LSThreadBitOffset").clear([105],e.capabilities,e.capabilities2,e.capabilities3,e.capabilities4,e.capabilities5),g=f[0],h=f[1],i=f[2],j=f[3];f=f[4];yield a.threads.put(babelHelpers["extends"]({},e,{capabilities:g,capabilities2:h,capabilities3:i,capabilities4:j,capabilities5:f,snippet:void 0}));yield c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield a.group_invites["delete"](b.threadKey,b.inviterId,b.inviteeId)});return function(a){return c.apply(this,arguments)}}())});return s.apply(this,arguments)}g.enableAddMembersTxn=a;g.disableAddMembersTxn=e;g.disableBlockerCapabilitiesTxn=f;g.updateNonMessageRequestThreadTxn=n;g.setGroupInviteTxn=p;g.clearGroupInviteTxn=r}),226);
__d("uniqueArray",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a}function a(a,b){var c=b!=null?b:g,d=[],e=new Set();a.forEach(function(a){var b=c(a);if(e.has(b))return;e.add(b);d.push(a)});return d}f["default"]=a}),66);
__d("MAWBridgeParticipantsUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWCurrentUser","MAWJids","MAWMiActMappingTableAPI","MAWUpdateLSThreadCapabilities","Promise","asyncToGeneratorRuntime","uniqueArray"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=d("MAWCurrentUser").getID(),m=(k||(k=d("I64"))).of_string(l);function a(a,b){b=b.map(function(a){var b=a.chatJid,c=a.type;a=a.userJid;return babelHelpers["extends"]({chatJid:b},x(c),{userJid:a})});return n(a,b)}function e(a,b){b=b.participants.map(function(a){return{chatJid:a.threadJid,isAdmin:a.isAdmin,isInvited:a.isInvited,isSuperAdmin:a.isSuperAdmin,userJid:d("MAWJids").toUserJid(a.fbid)}});return n(a,b)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=(yield r(a,c));yield (i||(i=b("Promise"))).all(c.map(function(c){var e=c.mawParticipant,f=c.threadKey,g=d("MAWJids").convertChatJidToIntJid(e.userJid);return[a.participants.get(f,g).then(function(c){var d=v(c,e,f);return c!=null?a.participants.put(d):(i||(i=b("Promise"))).all([a.participants.add(d),p(a,g)])}),t(a,g,f,e.isAdmin)]}).flat(Infinity))});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:j.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:j.ofNumber(c("LSContactIdType").FBID),contactType:j.ofNumber(c("LSContactType").USER),contactViewerRelationship:j.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:j.ofNumber(c("LSContactGender").UNKNOWN),id:b,isBlocked:!1,isMemorialized:!1,isSelf:l===(k||(k=d("I64"))).to_string(b),workForeignEntityType:j.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=c("uniqueArray")(e.map(function(a){return a.chatJid})),g=new Map();yield (i||(i=b("Promise"))).all(f.map(function(b){return d("MAWMiActMappingTableAPI").getThreadKeyForChatJid(a,b).then(function(a){return a!=null&&g.set(b,a)})}));return e.map(function(a){var b=g.get(a.chatJid);return b==null?null:{mawParticipant:a,threadKey:b}}).filter(Boolean)});return s.apply(this,arguments)}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){yield d("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(a,c),(k||(k=d("I64"))).equal(m,b)&&(e?yield d("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(a,c):yield d("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(a,c))});return u.apply(this,arguments)}function v(a,b,c){return a==null?babelHelpers["extends"]({},w(b),{authorityLevel:(k||(k=d("I64"))).zero,contactId:d("MAWJids").convertChatJidToIntJid(b.userJid),deliveredWatermarkTimestampMs:k.zero,isSuperAdmin:b.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:k.zero,readWatermarkTimestampMs:k.zero,threadKey:c,threadRoles:k.zero}):babelHelpers["extends"]({},a,w(b))}function w(a){return{groupParticipantJoinState:a.isInvited?(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED):(j||(j=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER),isAdmin:a.isAdmin,isModerator:!1,subscribeSource:a.isSuperAdmin?h._(/*BTDS*/"Group creator").toString():void 0}}function x(a){return{isAdmin:a==="superadmin"||a==="admin",isInvited:a==="invitedParticipant",isSuperAdmin:a==="superadmin"}}g.callFromMainThread=a;g.call=e;g.mawToLsParticipantTypeConversion=x}),226);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){c("FBLogger")("messenger_web").catching(b).mustfix("Cannot convert string to i64: %s",a)}}g.stringToI64Opt=a}),98);
__d("MAWConvertExtendedContentTypeToLSXmaContentType",["LSXmaContentType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return null;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return c("LSXmaContentType").FB_FEED_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return c("LSXmaContentType").FB_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return c("LSXmaContentType").FB_STORY_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return c("LSXmaContentType").FB_STORY_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return c("LSXmaContentType").FB_FEED_VIDEO_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return c("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return c("LSXmaContentType").FB_PRODUCER_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return c("LSXmaContentType").FB_EVENT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:return c("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return c("LSXmaContentType").MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return c("LSXmaContentType").FB_SHORT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return c("LSXmaContentType").MSG_LOCATION_SHARING;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return c("LSXmaContentType").MSG_LOCATION_SHARING_V2;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return c("LSXmaContentType").FB_POST_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return c("LSXmaContentType").MSG_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return c("LSXmaContentType").MSG_AI_CONTACT;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return c("LSXmaContentType").MSG_MEMORIES_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return c("LSXmaContentType").MSG_EXTERNAL_LINK_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return c("LSXmaContentType").RTC_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return c("LSXmaContentType").RTC_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return c("LSXmaContentType").RTC_MISSED_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return c("LSXmaContentType").RTC_MISSED_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return c("LSXmaContentType").FB_PROFILE_DIRECTORY_ITEM;default:return null}}g.convertExtendedContentTypeToLSXmaContentType=a}),98);
__d("MAWBridgeXMAUtils",["I64","LSIntEnum","MAWBridgeUIEventDataValidation","MAWConvertExtendedContentTypeToLSXmaContentType","MAWMpsGating","MAWXMAUtils","MNLSXMALayoutType","MNXMAPreviewImageDecorationType","MWPBumpEntityKey","MessagingAttachmentType","Promise","Random","ReQL","WAArmadilloXMA.pb","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,i){var k=c.ctas,l=c.defaultCTA,o=m(c.targetId,c.targetType),s=(j||(j=d("I64"))).of_int32(d("Random").uint32());if(l!=null){var t=p(l,s,f,e,g,o,c.targetType);yield r(a,t,s,i.defaultCta)}t=d("MAWXMAUtils").isFBXMAPostMention(c.targetType)&&c.author===d("WAJids").AUTHOR_ME;c=[];k!=null&&!t&&(c=(yield (h||(h=b("Promise"))).all(k.map(function(b,c){var d=n(s,c);b=q(b,d,f,e,g,o);c=c===0?i.attachmentCta1:c===1?i.attachmentCta2:c===2?i.attachmentCta3:void 0;return r(a,b,d,c)}))));return{attachmentCta1Id:c.length>0?c[0]:void 0,attachmentCta2Id:c.length>1?c[1]:void 0,attachmentCta3Id:c.length>2?c[2]:void 0,defaultCtaId:l==null?void 0:s}});return k.apply(this,arguments)}function l(a){var b="xma_web_url";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b="xma_rtc_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b="xma_rtc_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b="xma_rtc_missed_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b="xma_rtc_missed_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:b="igd_web_post_share";break}return b}function m(a,b){return d("MAWXMAUtils").isFBXMAPostMention(b)?void 0:a!=null?d("MAWBridgeUIEventDataValidation").stringToI64Opt(a):void 0}function n(a,b){return(j||(j=d("I64"))).add(a,j.of_int32(b+1))}function o(a,b,c,e,f,g,h){h===void 0&&(h="xma_web_url");var i=a.actionUrl,k=a.nativeUrl;return{actionContentBlob:void 0,actionUrl:i!=null?i:k,attachmentFbid:f,attachmentIndex:(j||(j=d("I64"))).zero,ctaId:b,enableExtensions:!1,extensionHeightType:void 0,messageId:c,nativeUrl:k!=null?k:i,platformToken:void 0,targetId:g!=null?g:void 0,threadKey:e,title:(f=a.title)!=null?f:"Tap to view status update",type_:h!=null?h:"xma_web_url",urlWebviewType:void 0}}function p(a,b,c,d,e,f,g){g=l(g);return o(a,b,c,d,e,f,g)}function q(a,b,c,d,e,f){var g;switch(a.ctaType){case"contact_sharing_profile":g="contact_sharing_profile";break;case"contact_sharing_message":g="contact_sharing_message";break}return o(a,b,c,d,e,f,g)}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){d!=null?yield a.attachment_ctas.upsert([d.ctaId],b):yield a.attachment_ctas.add(b);return c});return s.apply(this,arguments)}function e(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=null,f={attachmentCta1:void 0,attachmentCta2:void 0,attachmentCta3:void 0,defaultCta:void 0};e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,c)));e!=null&&(f.defaultCta=(yield u(a,e.defaultCtaId)),f.attachmentCta1=(yield u(a,e.attachmentCta1Id)),f.attachmentCta2=(yield u(a,e.attachmentCta2Id)),f.attachmentCta3=(yield u(a,e.attachmentCta3Id)));return[e,f]});return t.apply(this,arguments)}function u(a,c){return c==null?(h||(h=b("Promise"))).resolve(void 0):(a=d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachment_ctas).getKeyRange(c)))!=null?a:void 0}function f(a,b,e,f,g,h,k,l,m){var n,o,p,q=(j||(j=d("I64"))).zero,r=v(a),s=d("MAWConvertExtendedContentTypeToLSXmaContentType").convertExtendedContentTypeToLSXmaContentType(a.targetType);s=s?(j||(j=d("I64"))).of_int32(s):void 0;n=(n=a==null||(o=a.defaultCTA)==null?void 0:o.actionUrl)!=null?n:a==null||(p=a.defaultCTA)==null?void 0:p.nativeUrl;a.defaultPreviewMediaId!=null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.new_xma_handler","xma_preview_media_has_plaintext_hash."+m+"."+a.targetType+"."+(a.defaultPreviewMediaPlaintextHash!=null?"true":"false"));m=d("MAWMpsGating").isMpsMessageRendering();return{accessibilitySummaryText:void 0,actionUrl:n!=null?n:void 0,attachmentCta1Id:g,attachmentCta2Id:h,attachmentCta3Id:k,attachmentFbid:e,attachmentIndex:j.zero,attachmentLoggingType:void 0,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:j.zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:x(a.ctas,1),cta1Type:w(a.ctas,1),cta2Title:x(a.ctas,2),cta2Type:w(a.ctas,2),cta3Title:x(a.ctas,3),cta3Type:w(a.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:l,defaultCtaTitle:(n=a.defaultCTA)==null?void 0:n.title,defaultCtaType:r.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:a.filesize!=null?(j||(j=d("I64"))).of_int32(a.filesize):void 0,gatingTitle:a.overlayTitle,gatingType:a.overlayIconGlyph!=null?String(a.overlayIconGlyph):void 0,hasMedia:a.hasMedia!=null?a.hasMedia:!1,hasXma:!0,hasXmaFavicon:m?a.faviconPlaintextHash!=null:a.faviconMediaId!=null,hasXmaHeaderImage:m?a.headerMediaPlaintextHash!=null:a.headerMediaId!=null,hasXmaPreview:m?a.defaultPreviewMediaPlaintextHash!=null:a.defaultPreviewMediaId!=null,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:a.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines!=null?(j||(j=d("I64"))).of_int32(a.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:a.maxTitleNumOfLines!=null?(j||(j=d("I64"))).of_int32(a.maxTitleNumOfLines):void 0,messageId:f,miniPreview:void 0,offlineAttachmentId:(g=a.offlineAttachmentId)!=null?g:e,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:r.height,previewHeightLarge:a.previewHeightLarge!=null?(j||(j=d("I64"))).of_int32(a.previewHeightLarge):void 0,previewImageDecorationType:z(a.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:r.width,previewWidthLarge:a.previewWidthLarge!=null?(j||(j=d("I64"))).of_int32(a.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:a.subtitleText,targetId:void 0,threadKey:b,timestampMs:q,titleText:a.titleText,transportKey:"WhatsApp",viewerSeenTimestampMs:void 0,waveformData:void 0,xmaContentType:s,xmaDataclass:a.xmaDataclass,xmaFaviconFbid:m?a.faviconPlaintextHash:(h=a.faviconMediaId)==null?void 0:h.toString(),xmaHeaderImageFbid:m?a.headerMediaPlaintextHash:(k=a.headerMediaId)==null?void 0:k.toString(),xmaLayoutType:a.xmaLayoutType!=null?y(a.xmaLayoutType):void 0,xmaPreviewFbid:m?a.defaultPreviewMediaPlaintextHash:(l=a.defaultPreviewMediaId)==null?void 0:l.toString(),xmasTemplateType:a.xmaLayoutType!=null?y(a.xmaLayoutType):void 0}}function v(a){var b;switch(a.targetType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:b={height:(j||(j=d("I64"))).of_int32(108),width:(j||(j=d("I64"))).of_int32(72),xmaContentType:"xma_montage_share"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:b={xmaContentType:"xma_rtc_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:b={xmaContentType:"xma_rtc_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:b={xmaContentType:"xma_rtc_missed_group_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:b={xmaContentType:"xma_rtc_missed_group_video"};break;default:b={height:a.previewHeight!=null?(j||(j=d("I64"))).of_int32(a.previewHeight):void 0,width:a.previewWidth!=null?(j||(j=d("I64"))).of_int32(a.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return b}function w(a,b){if(a==null)return;a=a[b-1];if(a==null)return;b=a.buttonType;a=a.ctaType;switch(a){case"contact_sharing_profile":return"contact_sharing_profile";case"contact_sharing_message":return"contact_sharing_message";default:return b===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}}function x(a,b){if(a==null)return;a=a[b-1];if(a!=null)return a.title}function y(a){return a===0||a!==3?(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SINGLE):(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").PORTRAIT)}function z(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").COLLAGE);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").REEL);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON);default:return(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}}g.addAttachmentCtas=a;g.maybeBridgeToLSTargetId=m;g.getCtaIdFromDefaultCtaId=n;g.composeDefaultAttachmentCta=p;g.composeAttachmentCta=q;g.getExistingAttachmentAndAttachmentCtas=e;g.composeAttachmentXMA=f}),98);
__d("MAWBridgeXMA",["MAWBridgeXMAUtils","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){if(a==null)return void 0;switch(a){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function a(a,b,c){var e,f,g,j,k=b.author,l=b.contentRef,m=b.ctas,n=b.defaultCTA,o=b.defaultPreviewMediaId,p=b.defaultPreviewMediaPlaintextHash,q=b.faviconMediaId,r=b.faviconPlaintextHash,s=b.headerMediaId,t=b.headerMediaPlaintextHash,u=b.headerTitle,v=b.maxSubtitleNumOfLines,w=b.maxTitleNumOfLines,x=b.msgId,y=b.offlineAttachmentId,z=b.overlayIconGlyph,A=b.overlayTitle,B=b.subtitleText,C=b.targetId,D=b.targetType,E=b.targetUsername,F=b.threadJid,G=b.titleText,H=b.xmaDataclass,I=b.xmaId;b=b.xmaLayoutType;a!=null&&a.mediaType!==d("MAWDbMedia").MEDIA_TYPE.IMAGE&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""])),a.mediaType);C!=null&&d("MAWBridgeXMAUtils").maybeBridgeToLSTargetId(C,D);var J=c.hasMedia,K=c.hasXmaFaviconMedia;c=c.hasXmaHeaderMedia;return{author:k,contentRef:l,ctas:m==null?void 0:m.filter(function(a){return a.ctaType!=null}),defaultCTA:n,defaultPreviewMediaId:o,defaultPreviewMediaPlaintextHash:p,duration:null,faviconMediaId:q,faviconPlaintextHash:r,filesize:a==null?void 0:a.size,hasMedia:J,hasXmaFaviconMedia:K,hasXmaHeaderMedia:c,headerMediaId:s,headerMediaPlaintextHash:t,headerTitle:u,maxSubtitleNumOfLines:v,maxTitleNumOfLines:w,mediaType:a==null?void 0:a.mediaType,msgId:x,offlineAttachmentId:y,overlayIconGlyph:z,overlayTitle:A,playableUrlMimeType:i(a==null?void 0:a.mediaType),previewHeight:a==null||(e=a.validatedImageInfo)==null?void 0:e.jpegThumbnailHeight,previewHeightLarge:a==null||(f=a.validatedImageInfo)==null?void 0:f.height,previewUrlMimeType:i(a==null?void 0:a.mediaType),previewWidth:a==null||(g=a.validatedImageInfo)==null?void 0:g.jpegThumbnailWidth,previewWidthLarge:a==null||(j=a.validatedImageInfo)==null?void 0:j.width,subtitleText:B,targetId:C,targetType:D,targetUsername:E,threadJid:F,titleText:G,ts:a==null?void 0:a.ts,xmaDataclass:H,xmaId:I,xmaLayoutType:b}}function b(a,b){var c=a.msgId;a=a.threadJid;return{msgId:c,threadJid:a,xmaId:b}}function c(a,b){var c=a.msgId;a=a.threadJid;return{msgId:c,threadJid:a,xmaId:b}}g.mediaTypeToMimeType=i;g.createBridgeXMA=a;g.createBridgeXMAShareExpired=b;g.createBridgeXMAShareTombstoned=c}),98);
__d("MAWCastToMsgrServerMediaType",["EncryptedBackupsUploadEntity","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b){b===void 0&&(b=!1);if(b&&a==="image")return"xma";switch(a){case"image":case"video":case"gif":case"sticker":return a;case"document":return"file";case"ptt":return"audio";case"xma-image":return"xma";case"preview":return"preview";default:d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["invalid mediaType: "," for castToMsgrServerMediaType method"])),a);return null}}function b(a,b){b===void 0&&(b=!1);if(b&&a===d("MAWDbMedia").MEDIA_TYPE.IMAGE)return"xma";switch(a){case"Image":return"image";case"Video":return"video";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"file";case"Ptt":return"audio";default:d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["invalid client mediaType: "," for castClientMediaTypeToServerMediaType method"])),a);return null}}function c(a){switch(a){case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE:return"image";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO:return"video";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF:return"gif";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.STICKER:return"sticker";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT:return"file";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT:return"audio";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA:return"xma";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW:return"preview";default:d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["invalid attachment mediaType: "," for castMediaAttachmentTypeToServerMediaType method"])),a);return null}}g.castToMsgrServerMediaType=a;g.castClientMediaTypeToServerMediaType=b;g.castMediaAttachmentTypeToServerMediaType=c}),98);
__d("MAWFolderTypes",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=10;var g=15,h={ARCHIVED:e,INBOX:a,OTHER:c,PENDING:b,RESTRICTED:g,SPAM:d};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.SPAM=d;f.ARCHIVED=e;f.RESTRICTED=g;f.FOLDER_ID=h}),66);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=d("I64"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d("WATimeUtils").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(a));return i(a)}return(h||(h=d("I64"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d("WATimeUtils").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(a));return d("WATimeUtils").castToMillisTime(a*1e3)}return a}f=(h||(h=d("I64"))).of_string("9999999999999");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,d){return indexedDB==null||a==null?(h||(h=b("Promise"))).resolve():new(h||(h=b("Promise")))(function(b,e){var f=indexedDB.deleteDatabase(a);f.onsuccess=function(){c("FBLogger")("maw_db").warn("%s db was deleted",d),b()};f.onblocked=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",d)};f.onerror=function(){c("FBLogger")("maw_db").mustfix("Cannot delete %s db",d),e(f.error)}})}function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("CurrentMessengerUser").getID();yield (h||(h=b("Promise"))).all([i(d("MAWIndexedDbMetadata").dbName(a),"maw_v1"),i(d("MAWIndexedDbMetadata").restoreDbName2(a),"maw_v3"),i(d("MAWIndexedDbMetadata").jobsDbName(a),"signal"),i(d("MAWIndexedDbMetadata").logDbName(a),"logDb")])});return j.apply(this,arguments)}g.deleteDB=i;g.deleteMAWPersistence=a}),98);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,c,e,f,g){if(a===d("MAWMsgType").MSG_TYPE.TEXT)if(b)return(i||(i=d("LSIntEnum"))).ofNumber(8192);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.IMAGE||a===d("MAWMsgType").MSG_TYPE.VIDEO||a===d("MAWMsgType").MSG_TYPE.RAVEN)return(i||(i=d("LSIntEnum"))).ofNumber(2);else if(a===d("MAWMsgType").MSG_TYPE.PTT)return(i||(i=d("LSIntEnum"))).ofNumber(4);else if(a===d("MAWMsgType").MSG_TYPE.FUTUREPROOF)return k(f);else if(a===d("MAWMsgType").MSG_TYPE.CIPHERTEXT)return(i||(i=d("LSIntEnum"))).ofNumber(65536);else if(a===d("MAWMsgType").MSG_TYPE.UNAVAILABLE)return(i||(i=d("LSIntEnum"))).ofNumber(262144);else if(a===d("MAWMsgType").MSG_TYPE.GIF)return(i||(i=d("LSIntEnum"))).ofNumber(16384);else if(a===d("MAWMsgType").MSG_TYPE.STICKER)return(i||(i=d("LSIntEnum"))).ofNumber(4096);else if(a===d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE)return(i||(i=d("LSIntEnum"))).ofNumber(64);else if(a===d("MAWMsgType").MSG_TYPE.XMA)if(c!=null&&c)return(i||(i=d("LSIntEnum"))).ofNumber(256);else return g===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(i||(i=d("LSIntEnum"))).ofNumber(536870912):(i||(i=d("LSIntEnum"))).ofNumber(1024);else if(a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE)if(!e)return(i||(i=d("LSIntEnum"))).ofNumber(33554432);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH)return(i||(i=d("LSIntEnum"))).ofNumber(134217728);else return(i||(i=d("LSIntEnum"))).ofNumber(1)}function k(a){switch(a){case"liveLocationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(i||(i=d("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(i||(i=d("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(i||(i=d("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(i||(i=d("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(i||(i=d("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(i||(i=d("LSIntEnum"))).ofNumber(17179869184);default:return(i||(i=d("LSIntEnum"))).ofNumber(131072)}}function e(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function f(a,b){var e=a.replyAttachmentType;if(e==null)return!1;b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);return b&&a.replyAttachmentId==null?!1:(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO))}function l(a){return(j||(j=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function m(a){return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a.displayedContentTypes)}function n(a){a=a.displayedContentTypes;if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(32)))return!0;else return!1}function o(a){return(j||(j=d("I64"))).lt(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))}function p(a){a=a.displayedContentTypes;return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(1024),a)||d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(536870912),a)}function q(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(65536))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(131072))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(524288))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4294967296))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1048576))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2097152))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4194304))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2147483648))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8388608))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16777216))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1073741824))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8589934592))?!0:(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(262144))}var r=(b=b("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),s=b({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),t=b({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2});b=b({IMAGE:0,VIDEO:1});g.text=(h=d("MAWMsgType")).MSG_TYPE.TEXT;g.image=h.MSG_TYPE.IMAGE;g.video=h.MSG_TYPE.VIDEO;g.ptt=h.MSG_TYPE.PTT;g.unsent=h.MSG_TYPE.REVOKED;g.gif=h.MSG_TYPE.GIF;g.bumpExistingMessage=h.MSG_TYPE.BUMP_EXISTING_MESSAGE;g.getDisplayedContentTypes=a;g.isMediaMsg=e;g.isMediaReplyAttachmentType=f;g.isReceiverFetchMsg=l;g.isReceiverFetchXMAMsg=m;g.isAdminMsg=n;g.isOptimistic=o;g.isXMAMsg=p;g.isPlaceholder=q;g.MAWRavenActionNotifType=r;g.MAWRavenMsgEphemeralMediaState=s;g.MAWRavenMsgEphemeralType=t;g.MAWRavenMsgMediaType=b}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:3449")&&b("cr:3449").clearLocalStorageBigValues()}g.onQuotaExceeded=a}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j,d("MWLocalStorageErrorHandler").onQuotaExceeded)}function e(a,b){a==null?d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("WAArmadilloApplication.pb",["WAArmadilloXMA.pb","WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h,i;a={ES_OPEN:1,ES_CLOSE:2};b={PAYMENT_UNKNOWN:-1,REQUEST_INITED:4,REQUEST_DECLINED:5,REQUEST_TRANSFER_INITED:6,REQUEST_TRANSFER_COMPLETED:7,REQUEST_TRANSFER_FAILED:8,REQUEST_CANCELED:9,REQUEST_EXPIRED:10,TRANSFER_INITED:11,TRANSFER_PENDING:12,TRANSFER_PENDING_RECIPIENT_VERIFICATION:13,TRANSFER_CANCELED:14,TRANSFER_COMPLETED:15,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_CANCELED:16,TRANSFER_NO_RECEIVER_CREDENTIAL_NO_RTS_PENDING_OTHER:17,TRANSFER_REFUNDED:18,TRANSFER_PARTIAL_REFUND:19,TRANSFER_CHARGED_BACK:20,TRANSFER_EXPIRED:21,TRANSFER_DECLINED:22,TRANSFER_UNAVAILABLE:23};c={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};e={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2};f={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2};var j={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={};k.name="Armadillo";k.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,m],metadata:[2,h.TYPES.MESSAGE,l]};l.name="Armadillo$Metadata";l.internalSpec={};m.name="Armadillo$Payload";m.internalSpec={content:[1,h.TYPES.MESSAGE,E],applicationData:[2,h.TYPES.MESSAGE,r],signal:[3,h.TYPES.MESSAGE,o],subProtocol:[4,h.TYPES.MESSAGE,n],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};n.name="Armadillo$SubProtocolPayload";n.internalSpec={futureProof:[1,h.TYPES.ENUM,(i=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};o.name="Armadillo$Signal";o.internalSpec={encryptedBackupsSecrets:[1,h.TYPES.MESSAGE,p],__oneofs__:{signal:["encryptedBackupsSecrets"]}};p.name="Armadillo$Signal$EncryptedBackupsSecrets";p.internalSpec={backupId:[1,h.TYPES.UINT64],serverDataId:[2,h.TYPES.UINT64],epoch:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,q],tempOcmfClientState:[4,h.TYPES.BYTES],mailboxRootKey:[5,h.TYPES.BYTES],obliviousValidationToken:[6,h.TYPES.BYTES]};q.name="Armadillo$Signal$EncryptedBackupsSecrets$Epoch";q.internalSpec={id:[1,h.TYPES.UINT64],anonId:[2,h.TYPES.BYTES],rootKey:[3,h.TYPES.BYTES],status:[4,h.TYPES.ENUM,a]};r.name="Armadillo$ApplicationData";r.internalSpec={metadataSync:[1,h.TYPES.MESSAGE,D],aiBotResponse:[2,h.TYPES.MESSAGE,t],messageHistoryDocumentMessage:[3,h.TYPES.MESSAGE,s],__oneofs__:{applicationData:["metadataSync","aiBotResponse","messageHistoryDocumentMessage"]}};s.name="Armadillo$ApplicationData$MessageHistoryDocumentMessage";s.internalSpec={document:[1,h.TYPES.MESSAGE,i.SubProtocolSpec]};t.name="Armadillo$ApplicationData$AIBotResponseMessage";t.internalSpec={summonToken:[1,h.TYPES.STRING],messageText:[2,h.TYPES.STRING],serializedExtras:[3,h.TYPES.STRING]};u.name="Armadillo$ApplicationData$MetadataSyncAction";u.internalSpec={actionTimestamp:[1,h.TYPES.INT64],chatAction:[101,h.TYPES.MESSAGE,x],messageAction:[102,h.TYPES.MESSAGE,v],__oneofs__:{actionType:["chatAction","messageAction"]}};v.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction";v.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],messageDelete:[101,h.TYPES.MESSAGE,w],__oneofs__:{action:["messageDelete"]}};w.name="Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDelete";w.internalSpec={};x.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction";x.internalSpec={chatId:[1,h.TYPES.STRING],chatArchive:[101,h.TYPES.MESSAGE,A],chatDelete:[102,h.TYPES.MESSAGE,z],chatRead:[103,h.TYPES.MESSAGE,y],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}};y.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatRead";y.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],read:[2,h.TYPES.BOOL]};z.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDelete";z.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C]};A.name="Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchive";A.internalSpec={messageRange:[1,h.TYPES.MESSAGE,C],archived:[2,h.TYPES.BOOL]};B.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessage";B.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],timestamp:[2,h.TYPES.INT64]};C.name="Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRange";C.internalSpec={lastMessageTimestamp:[1,h.TYPES.INT64],lastSystemMessageTimestamp:[2,h.TYPES.INT64],messages:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,B]};D.name="Armadillo$ApplicationData$MetadataSyncNotification";D.internalSpec={actions:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,u]};E.name="Armadillo$Content";E.internalSpec={commonSticker:[1,h.TYPES.MESSAGE,O],screenshotAction:[3,h.TYPES.MESSAGE,K],extendedContentMessage:[4,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec],ravenMessage:[5,h.TYPES.MESSAGE,N],ravenActionNotifMessage:[6,h.TYPES.MESSAGE,M],extendedMessageContentWithSear:[7,h.TYPES.MESSAGE,L],imageGalleryMessage:[8,h.TYPES.MESSAGE,J],paymentsTransactionMessage:[10,h.TYPES.MESSAGE,F],bumpExistingMessage:[11,h.TYPES.MESSAGE,I],noteReplyMessage:[13,h.TYPES.MESSAGE,H],ravenMessageMsgr:[14,h.TYPES.MESSAGE,N],networkVerificationMessage:[15,h.TYPES.MESSAGE,G],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage","extendedMessageContentWithSear","imageGalleryMessage","paymentsTransactionMessage","bumpExistingMessage","noteReplyMessage","ravenMessageMsgr","networkVerificationMessage"]}};F.name="Armadillo$Content$PaymentsTransactionMessage";F.internalSpec={transactionId:[1,h.TYPES.UINT64],amount:[2,h.TYPES.STRING],currency:[3,h.TYPES.STRING],paymentStatus:[4,h.TYPES.ENUM,b],extendedContentMessage:[5,h.TYPES.MESSAGE,d("WAArmadilloXMA.pb").ExtendedContentMessageSpec]};G.name="Armadillo$Content$NetworkVerificationMessage";G.internalSpec={codeText:[1,h.TYPES.STRING]};H.name="Armadillo$Content$NoteReplyMessage";H.internalSpec={noteId:[1,h.TYPES.STRING],noteText:[2,h.TYPES.MESSAGE,i.MessageTextSpec],noteTimestampMs:[3,h.TYPES.INT64],textContent:[4,h.TYPES.MESSAGE,i.MessageTextSpec],stickerContent:[5,h.TYPES.MESSAGE,i.SubProtocolSpec],videoContent:[6,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{noteReplyContent:["textContent","stickerContent","videoContent"]}};I.name="Armadillo$Content$BumpExistingMessage";I.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec]};J.name="Armadillo$Content$ImageGalleryMessage";J.internalSpec={images:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i.SubProtocolSpec]};K.name="Armadillo$Content$ScreenshotAction";K.internalSpec={screenshotType:[1,h.TYPES.ENUM,c]};L.name="Armadillo$Content$ExtendedContentMessageWithSear";L.internalSpec={searId:[1,h.TYPES.STRING],payload:[2,h.TYPES.BYTES],nativeUrl:[3,h.TYPES.STRING],searAssociatedMessage:[4,h.TYPES.MESSAGE,i.SubProtocolSpec],searSentWithMessageId:[5,h.TYPES.STRING]};M.name="Armadillo$Content$RavenActionNotifMessage";M.internalSpec={key:[1,h.TYPES.MESSAGE,i.MessageKeySpec],actionTimestamp:[2,h.TYPES.INT64],actionType:[3,h.TYPES.ENUM,e]};N.name="Armadillo$Content$RavenMessage";N.internalSpec={ephemeralType:[1,h.TYPES.ENUM,f],imageMessage:[2,h.TYPES.MESSAGE,i.SubProtocolSpec],videoMessage:[3,h.TYPES.MESSAGE,i.SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}};O.name="Armadillo$Content$CommonSticker";O.internalSpec={stickerType:[1,h.TYPES.ENUM,j]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCH_STATUS=a;g.ARMADILLO_CONTENT_PAYMENTS_TRANSACTION_MESSAGE_PAYMENT_STATUS=b;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE=c;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE=e;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERAL_TYPE=f;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKER_TYPE=j;g.ArmadilloSpec=k;g.Armadillo$MetadataSpec=l;g.Armadillo$PayloadSpec=m;g.Armadillo$SubProtocolPayloadSpec=n;g.Armadillo$SignalSpec=o;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=p;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=q;g.Armadillo$ApplicationDataSpec=r;g.Armadillo$ApplicationData$MessageHistoryDocumentMessageSpec=s;g.Armadillo$ApplicationData$AIBotResponseMessageSpec=t;g.Armadillo$ApplicationData$MetadataSyncActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=B;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=C;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=D;g.Armadillo$ContentSpec=E;g.Armadillo$Content$PaymentsTransactionMessageSpec=F;g.Armadillo$Content$NetworkVerificationMessageSpec=G;g.Armadillo$Content$NoteReplyMessageSpec=H;g.Armadillo$Content$BumpExistingMessageSpec=I;g.Armadillo$Content$ImageGalleryMessageSpec=J;g.Armadillo$Content$ScreenshotActionSpec=K;g.Armadillo$Content$ExtendedContentMessageWithSearSpec=L;g.Armadillo$Content$RavenActionNotifMessageSpec=M;g.Armadillo$Content$RavenMessageSpec=N;g.Armadillo$Content$CommonStickerSpec=O}),98);
__d("WAArmadilloLocallyTransformedMessage.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.name="LocallyTransformedMessage";a.internalSpec={pollUpdateMessage:[1,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{content:["pollUpdateMessage"]}};b.name="LocallyTransformedMessage$PollUpdateAdminMessage";b.internalSpec={pollCreationMessageId:[1,d("WAProtoConst").TYPES.STRING],pollUpdateMessageId:[2,d("WAProtoConst").TYPES.STRING]};g.LocallyTransformedMessageSpec=a;g.LocallyTransformedMessage$PollUpdateAdminMessageSpec=b}),98);
__d("WAArmadilloMiTransportAdminMessage.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({UNSET:0,DISABLED:1,ENABLED:2});e=a({UNSET:0,CHANGED:1,REMOVED:2});f=a({UNSET:0,PINNED:1,UNPINNED:2});b=a({UNSET:0,ALL_MEMBERS:1,ADMINS_ONLY:2});var h=a({UNSET:0,ADDED:1,REMOVED:2});a=a({UNSET:0,ADDED:1,REMOVED:2});var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={},Q={};i.name="MiTransportAdminMessage";i.internalSpec={chatThemeChanged:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,Q],nicknameChanged:[2,d.TYPES.MESSAGE,P],groupParticipantChanged:[3,d.TYPES.MESSAGE,O],groupAdminChanged:[4,d.TYPES.MESSAGE,N],groupNameChanged:[5,d.TYPES.MESSAGE,M],groupMembershipAddModeChanged:[6,d.TYPES.MESSAGE,L],messagePinned:[7,d.TYPES.MESSAGE,K],groupImageChanged:[8,d.TYPES.MESSAGE,J],quickReactionChanged:[9,d.TYPES.MESSAGE,I],linkCta:[10,d.TYPES.MESSAGE,G],iconChanged:[11,d.TYPES.MESSAGE,F],disappearingSettingChanged:[12,d.TYPES.MESSAGE,E],limitSharingChanged:[13,d.TYPES.MESSAGE,D],xmatDisappearingSetting:[14,d.TYPES.MESSAGE,C],xmatFriendRequestConfirmedEncrypted:[15,d.TYPES.MESSAGE,B],xmatInstantGameEncryptedDynamicCustomUpdate:[16,d.TYPES.MESSAGE,A],xmatLinkCta:[17,d.TYPES.MESSAGE,z],xmatMagicWords:[18,d.TYPES.MESSAGE,y],xmatMessagingLimitSharing:[19,d.TYPES.MESSAGE,x],xmatMessengerQrCodeScanned:[20,d.TYPES.MESSAGE,w],xmatMessengerSharedAlbumAddition:[21,d.TYPES.MESSAGE,v],xmatMessengerSharedAlbumContentRemoval:[22,d.TYPES.MESSAGE,t],xmatMessengerSharedAlbumDeletion:[23,d.TYPES.MESSAGE,s],xmatMessengerSharedAlbumRename:[24,d.TYPES.MESSAGE,r],xmatMessengerSharedAlbum:[25,d.TYPES.MESSAGE,q],xmatThemeColor:[26,d.TYPES.MESSAGE,p],xmatThreadIcon:[27,d.TYPES.MESSAGE,o],xmatThreadNickname:[28,d.TYPES.MESSAGE,n],xmatThreadQuickReaction:[29,d.TYPES.MESSAGE,m],xmatUpdatePayments:[30,d.TYPES.MESSAGE,l],xmatPinMessageV2:[31,d.TYPES.MESSAGE,k],xmatUnpinMessageV2:[32,d.TYPES.MESSAGE,j],__oneofs__:{content:["chatThemeChanged","nicknameChanged","groupParticipantChanged","groupAdminChanged","groupNameChanged","groupMembershipAddModeChanged","messagePinned","groupImageChanged","quickReactionChanged","linkCta","iconChanged","disappearingSettingChanged","limitSharingChanged","xmatDisappearingSetting","xmatFriendRequestConfirmedEncrypted","xmatInstantGameEncryptedDynamicCustomUpdate","xmatLinkCta","xmatMagicWords","xmatMessagingLimitSharing","xmatMessengerQrCodeScanned","xmatMessengerSharedAlbumAddition","xmatMessengerSharedAlbumContentRemoval","xmatMessengerSharedAlbumDeletion","xmatMessengerSharedAlbumRename","xmatMessengerSharedAlbum","xmatThemeColor","xmatThreadIcon","xmatThreadNickname","xmatThreadQuickReaction","xmatUpdatePayments","xmatPinMessageV2","xmatUnpinMessageV2"]}};j.name="MiTransportAdminMessage$XmatUnpinMessageV2";j.internalSpec={pinnedMessageId:[1,d.TYPES.STRING]};k.name="MiTransportAdminMessage$XmatPinMessageV2";k.internalSpec={pinnedMessageId:[1,d.TYPES.STRING]};l.name="MiTransportAdminMessage$XmatUpdatePayments";l.internalSpec={receiverName:[1,d.TYPES.STRING],senderName:[2,d.TYPES.STRING],amount:[3,d.TYPES.FLOAT],transactionId:[4,d.TYPES.INT64],transactionStatus:[5,d.TYPES.INT32]};m.name="MiTransportAdminMessage$XmatThreadQuickReaction";m.internalSpec={threadQuickReactionEmoji:[1,d.TYPES.STRING],threadQuickReactionInstructionKeyId:[2,d.TYPES.STRING]};n.name="MiTransportAdminMessage$XmatThreadNickname";n.internalSpec={participantId:[1,d.TYPES.INT64],nickname:[2,d.TYPES.STRING]};o.name="MiTransportAdminMessage$XmatThreadIcon";o.internalSpec={threadIcon:[1,d.TYPES.STRING]};p.name="MiTransportAdminMessage$XmatThemeColor";p.internalSpec={themeId:[1,d.TYPES.STRING],themeColor:[2,d.TYPES.STRING],gradient:[3,d.FLAGS.REPEATED|d.TYPES.STRING],shouldShowIcon:[4,d.TYPES.BOOL],themeType:[5,d.TYPES.INT32],accessibilityLabel:[6,d.TYPES.STRING],themeNameWithSubtitle:[7,d.TYPES.STRING],themeEmoji:[8,d.TYPES.STRING]};q.name="MiTransportAdminMessage$XmatMessengerSharedAlbum";q.internalSpec={xmaDataclass:[1,d.TYPES.STRING]};r.name="MiTransportAdminMessage$XmatMessengerSharedAlbumRename";r.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],oldAlbumTitle:[2,d.TYPES.STRING],newAlbumTitle:[3,d.TYPES.STRING]};s.name="MiTransportAdminMessage$XmatMessengerSharedAlbumDeletion";s.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],albumTitle:[2,d.TYPES.STRING]};t.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval";t.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],removedContentMap:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,u],removedContentCount:[3,d.TYPES.INT64],albumTitle:[4,d.TYPES.STRING]};u.name="MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTuple";u.internalSpec={key:[1,d.TYPES.INT64],value:[2,d.TYPES.STRING]};v.name="MiTransportAdminMessage$XmatMessengerSharedAlbumAddition";v.internalSpec={sharedAlbumId:[1,d.TYPES.INT64],albumTitle:[2,d.TYPES.STRING],numOfAttachments:[3,d.TYPES.INT64],isAlbumCreation:[4,d.TYPES.BOOL]};w.name="MiTransportAdminMessage$XmatMessengerQRCodeScanned";w.internalSpec={receiverName:[1,d.TYPES.STRING],senderName:[2,d.TYPES.STRING]};x.name="MiTransportAdminMessage$XmatMessagingLimitSharing";x.internalSpec={senderName:[1,d.TYPES.STRING],senderId:[2,d.TYPES.STRING],limitSharingType:[3,d.TYPES.STRING]};y.name="MiTransportAdminMessage$XmatMagicWords";y.internalSpec={newMagicWordCount:[1,d.TYPES.INT64],removedMagicWordCount:[2,d.TYPES.INT64],magicWord:[3,d.TYPES.STRING],emojiEffect:[4,d.TYPES.STRING],isAllEdited:[5,d.TYPES.BOOL],themeName:[6,d.TYPES.STRING]};z.name="MiTransportAdminMessage$XmatLinkCTA";z.internalSpec={linkCtaXmatPrimaryText:[1,d.TYPES.STRING],linkCtaXmatCtaText:[2,d.TYPES.STRING],linkCtaXmatCtaUrl:[3,d.TYPES.STRING],linkCtaXmatCtaIosUrl:[4,d.TYPES.STRING],androidUri:[5,d.TYPES.STRING],asyncUrl:[6,d.TYPES.STRING],wwwIsAsyncUrl:[7,d.TYPES.BOOL],msiteEnabled:[8,d.TYPES.BOOL],hideUriInFallback:[9,d.TYPES.BOOL],showConfirmationDialog:[10,d.TYPES.BOOL],graphPayload:[11,d.TYPES.STRING],identifierName:[12,d.TYPES.STRING],threadId:[13,d.TYPES.STRING],hideCtaInFallback:[14,d.TYPES.BOOL],ctxAdConversationStarterInfo:[15,d.TYPES.STRING],fbmUri:[16,d.TYPES.STRING],initiatorUserId:[17,d.TYPES.STRING]};A.name="MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdate";A.internalSpec={senderName:[1,d.TYPES.STRING],muteManagementAdminTextType:[2,d.TYPES.STRING],gameName:[3,d.TYPES.STRING]};B.name="MiTransportAdminMessage$XmatFriendRequestConfirmedEncrypted";B.internalSpec={otherUserName:[1,d.TYPES.STRING],isTurnOnCohort:[2,d.TYPES.STRING]};C.name="MiTransportAdminMessage$XmatDisappearingSetting";C.internalSpec={disappearingSettingTime:[1,d.TYPES.INT64],oldDisappearingSettingTime:[2,d.TYPES.INT64],disappearingSettingActorFbid:[3,d.TYPES.INT64],newEphemeralityType:[4,d.TYPES.INT64],oldEphemeralityType:[5,d.TYPES.INT64]};D.name="MiTransportAdminMessage$LimitSharingChanged";D.internalSpec={sharingType:[1,d.TYPES.ENUM,c]};E.name="MiTransportAdminMessage$DisappearingSettingChanged";E.internalSpec={disappearingSettingDurationSeconds:[1,d.TYPES.INT32],oldDisappearingSettingDurationSeconds:[2,d.TYPES.INT32]};F.name="MiTransportAdminMessage$IconChanged";F.internalSpec={threadIcon:[1,d.TYPES.STRING]};G.name="MiTransportAdminMessage$LinkCta";G.internalSpec={ukOsaAdminText:[1,d.TYPES.MESSAGE,H],__oneofs__:{content:["ukOsaAdminText"]}};H.name="MiTransportAdminMessage$LinkCta$UkOsaAdminText";H.internalSpec={initiatorUserId:[2,d.TYPES.STRING]};I.name="MiTransportAdminMessage$QuickReactionChanged";I.internalSpec={emojiName:[1,d.TYPES.STRING]};J.name="MiTransportAdminMessage$GroupImageChanged";J.internalSpec={action:[1,d.TYPES.ENUM,e]};K.name="MiTransportAdminMessage$MessagePinned";K.internalSpec={action:[1,d.TYPES.ENUM,f]};L.name="MiTransportAdminMessage$GroupMembershipAddModeChanged";L.internalSpec={mode:[1,d.TYPES.ENUM,b]};M.name="MiTransportAdminMessage$GroupNameChanged";M.internalSpec={groupName:[1,d.TYPES.STRING]};N.name="MiTransportAdminMessage$GroupAdminChanged";N.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,h]};O.name="MiTransportAdminMessage$GroupParticipantChanged";O.internalSpec={targetUserId:[1,d.FLAGS.REPEATED|d.TYPES.STRING],action:[2,d.TYPES.ENUM,a]};P.name="MiTransportAdminMessage$NicknameChanged";P.internalSpec={targetUserId:[1,d.TYPES.STRING],nickname:[2,d.TYPES.STRING]};Q.name="MiTransportAdminMessage$ChatThemeChanged";Q.internalSpec={themeName:[1,d.TYPES.STRING],themeEmoji:[2,d.TYPES.STRING],themeType:[3,d.TYPES.INT32]};g.MiTransportAdminMessage$LimitSharingChanged$SharingType=c;g.MiTransportAdminMessage$GroupImageChanged$Action=e;g.MiTransportAdminMessage$MessagePinned$Action=f;g.MiTransportAdminMessage$GroupMembershipAddModeChanged$Mode=b;g.MiTransportAdminMessage$GroupAdminChanged$Action=h;g.MiTransportAdminMessage$GroupParticipantChanged$Action=a;g.MiTransportAdminMessageSpec=i;g.MiTransportAdminMessage$XmatUnpinMessageV2Spec=j;g.MiTransportAdminMessage$XmatPinMessageV2Spec=k;g.MiTransportAdminMessage$XmatUpdatePaymentsSpec=l;g.MiTransportAdminMessage$XmatThreadQuickReactionSpec=m;g.MiTransportAdminMessage$XmatThreadNicknameSpec=n;g.MiTransportAdminMessage$XmatThreadIconSpec=o;g.MiTransportAdminMessage$XmatThemeColorSpec=p;g.MiTransportAdminMessage$XmatMessengerSharedAlbumSpec=q;g.MiTransportAdminMessage$XmatMessengerSharedAlbumRenameSpec=r;g.MiTransportAdminMessage$XmatMessengerSharedAlbumDeletionSpec=s;g.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemovalSpec=t;g.MiTransportAdminMessage$XmatMessengerSharedAlbumContentRemoval$RemovedContentTupleSpec=u;g.MiTransportAdminMessage$XmatMessengerSharedAlbumAdditionSpec=v;g.MiTransportAdminMessage$XmatMessengerQRCodeScannedSpec=w;g.MiTransportAdminMessage$XmatMessagingLimitSharingSpec=x;g.MiTransportAdminMessage$XmatMagicWordsSpec=y;g.MiTransportAdminMessage$XmatLinkCTASpec=z;g.MiTransportAdminMessage$XmatInstantGameEncryptedDynamicCustomUpdateSpec=A;g.MiTransportAdminMessage$XmatFriendRequestConfirmedEncryptedSpec=B;g.MiTransportAdminMessage$XmatDisappearingSettingSpec=C;g.MiTransportAdminMessage$LimitSharingChangedSpec=D;g.MiTransportAdminMessage$DisappearingSettingChangedSpec=E;g.MiTransportAdminMessage$IconChangedSpec=F;g.MiTransportAdminMessage$LinkCtaSpec=G;g.MiTransportAdminMessage$LinkCta$UkOsaAdminTextSpec=H;g.MiTransportAdminMessage$QuickReactionChangedSpec=I;g.MiTransportAdminMessage$GroupImageChangedSpec=J;g.MiTransportAdminMessage$MessagePinnedSpec=K;g.MiTransportAdminMessage$GroupMembershipAddModeChangedSpec=L;g.MiTransportAdminMessage$GroupNameChangedSpec=M;g.MiTransportAdminMessage$GroupAdminChangedSpec=N;g.MiTransportAdminMessage$GroupParticipantChangedSpec=O;g.MiTransportAdminMessage$NicknameChangedSpec=P;g.MiTransportAdminMessage$ChatThemeChangedSpec=Q}),98);
__d("WAArmadilloTransportEvent.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,DETECTED:1,CLEARED:2});c=b("$InternalEnum")({NONE:0,ADDED:1,REMOVED:2,REPLACED:3});e=b("$InternalEnum")({DECRYPTION_FAILURE:1,UNAVAILABLE_MESSAGE:2});f={};b={};var h={},i={},j={};f.name="TransportEvent";f.internalSpec={placeholder:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,j],event:[2,d.TYPES.MESSAGE,b],__oneofs__:{content:["placeholder","event"]}};b.name="TransportEvent$Event";b.internalSpec={deviceChange:[1,d.TYPES.MESSAGE,i],icdcAlert:[2,d.TYPES.MESSAGE,h],__oneofs__:{event:["deviceChange","icdcAlert"]}};h.name="TransportEvent$Event$IcdcAlert";h.internalSpec={type:[1,d.TYPES.ENUM,a]};i.name="TransportEvent$Event$DeviceChange";i.internalSpec={type:[1,d.TYPES.ENUM,c],deviceName:[2,d.TYPES.STRING],devicePlatform:[3,d.TYPES.STRING],deviceModel:[4,d.TYPES.STRING]};j.name="TransportEvent$Placeholder";j.internalSpec={type:[1,d.TYPES.ENUM,e]};g.TransportEvent$Event$IcdcAlert$Type=a;g.TransportEvent$Event$DeviceChange$Type=c;g.TransportEvent$Placeholder$Type=e;g.TransportEventSpec=f;g.TransportEvent$EventSpec=b;g.TransportEvent$Event$IcdcAlertSpec=h;g.TransportEvent$Event$DeviceChangeSpec=i;g.TransportEvent$PlaceholderSpec=j}),98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};e.name="ConsumerApplication";e.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,h.TYPES.MESSAGE,j]};f.name="ConsumerApplication$Payload";f.internalSpec={content:[1,h.TYPES.MESSAGE,m],applicationData:[2,h.TYPES.MESSAGE,l],signal:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,i],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};i.name="ConsumerApplication$SubProtocolPayload";i.internalSpec={futureProof:[1,h.TYPES.ENUM,(d=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};j.name="ConsumerApplication$Metadata";j.internalSpec={specialTextSize:[1,h.TYPES.ENUM,a]};k.name="ConsumerApplication$Signal";k.internalSpec={};l.name="ConsumerApplication$ApplicationData";l.internalSpec={revoke:[1,h.TYPES.MESSAGE,v],__oneofs__:{applicationContent:["revoke"]}};m.name="ConsumerApplication$Content";m.internalSpec={messageText:[1,h.TYPES.MESSAGE,d.MessageTextSpec],imageMessage:[2,h.TYPES.MESSAGE,I],contactMessage:[3,h.TYPES.MESSAGE,A],locationMessage:[4,h.TYPES.MESSAGE,D],extendedTextMessage:[5,h.TYPES.MESSAGE,C],statusTextMessage:[6,h.TYPES.MESSAGE,B],documentMessage:[7,h.TYPES.MESSAGE,F],audioMessage:[8,h.TYPES.MESSAGE,H],videoMessage:[9,h.TYPES.MESSAGE,G],contactsArrayMessage:[10,h.TYPES.MESSAGE,z],liveLocationMessage:[11,h.TYPES.MESSAGE,y],stickerMessage:[12,h.TYPES.MESSAGE,E],groupInviteMessage:[13,h.TYPES.MESSAGE,x],viewOnceMessage:[14,h.TYPES.MESSAGE,w],reactionMessage:[16,h.TYPES.MESSAGE,u],pollCreationMessage:[17,h.TYPES.MESSAGE,s],pollUpdateMessage:[18,h.TYPES.MESSAGE,r],editMessage:[19,h.TYPES.MESSAGE,n],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}};n.name="ConsumerApplication$EditMessage";n.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageTextSpec],timestampMs:[3,h.TYPES.INT64]};o.name="ConsumerApplication$PollAddOptionMessage";o.internalSpec={pollOption:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};p.name="ConsumerApplication$PollVoteMessage";p.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES],senderTimestampMs:[2,h.TYPES.INT64]};q.name="ConsumerApplication$PollEncValue";q.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};r.name="ConsumerApplication$PollUpdateMessage";r.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,d.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,q],addOption:[3,h.TYPES.MESSAGE,q]};s.name="ConsumerApplication$PollCreationMessage";s.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],selectableOptionsCount:[4,h.TYPES.UINT32]};t.name="ConsumerApplication$Option";t.internalSpec={optionName:[1,h.TYPES.STRING]};u.name="ConsumerApplication$ReactionMessage";u.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],reactionMetadataDataclassData:[5,h.TYPES.STRING],style:[6,h.TYPES.INT32]};v.name="ConsumerApplication$RevokeMessage";v.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec]};w.name="ConsumerApplication$ViewOnceMessage";w.internalSpec={imageMessage:[1,h.TYPES.MESSAGE,I],videoMessage:[2,h.TYPES.MESSAGE,G],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}};x.name="ConsumerApplication$GroupInviteMessage";x.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.MESSAGE,d.MessageTextSpec]};y.name="ConsumerApplication$LiveLocationMessage";y.internalSpec={location:[1,h.TYPES.MESSAGE,L],accuracyInMeters:[2,h.TYPES.UINT32],speedInMps:[3,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,h.TYPES.UINT32],caption:[5,h.TYPES.MESSAGE,d.MessageTextSpec],sequenceNumber:[6,h.TYPES.INT64],timeOffset:[7,h.TYPES.UINT32]};z.name="ConsumerApplication$ContactsArrayMessage";z.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};A.name="ConsumerApplication$ContactMessage";A.internalSpec={contact:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};B.name="ConsumerApplication$StatusTextMesage";B.internalSpec={text:[1,h.TYPES.MESSAGE,C],textArgb:[6,h.TYPES.FIXED32],backgroundArgb:[7,h.TYPES.FIXED32],font:[8,h.TYPES.ENUM,b]};C.name="ConsumerApplication$ExtendedTextMessage";C.internalSpec={text:[1,h.TYPES.MESSAGE,d.MessageTextSpec],matchedText:[2,h.TYPES.STRING],canonicalUrl:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],title:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],previewType:[7,h.TYPES.ENUM,c]};D.name="ConsumerApplication$LocationMessage";D.internalSpec={location:[1,h.TYPES.MESSAGE,L],address:[2,h.TYPES.STRING]};E.name="ConsumerApplication$StickerMessage";E.internalSpec={sticker:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};F.name="ConsumerApplication$DocumentMessage";F.internalSpec={document:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],fileName:[2,h.TYPES.STRING]};G.name="ConsumerApplication$VideoMessage";G.internalSpec={video:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};H.name="ConsumerApplication$AudioMessage";H.internalSpec={audio:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],ptt:[2,h.TYPES.BOOL]};I.name="ConsumerApplication$ImageMessage";I.internalSpec={image:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};J.name="ConsumerApplication$InteractiveAnnotation";J.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,K],location:[2,h.TYPES.MESSAGE,L],__oneofs__:{action:["location"]}};K.name="ConsumerApplication$Point";K.internalSpec={x:[1,h.TYPES.DOUBLE],y:[2,h.TYPES.DOUBLE]};L.name="ConsumerApplication$Location";L.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};M.name="ConsumerApplication$MediaPayload";M.internalSpec={protocol:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=i;g.ConsumerApplication$MetadataSpec=j;g.ConsumerApplication$SignalSpec=k;g.ConsumerApplication$ApplicationDataSpec=l;g.ConsumerApplication$ContentSpec=m;g.ConsumerApplication$EditMessageSpec=n;g.ConsumerApplication$PollAddOptionMessageSpec=o;g.ConsumerApplication$PollVoteMessageSpec=p;g.ConsumerApplication$PollEncValueSpec=q;g.ConsumerApplication$PollUpdateMessageSpec=r;g.ConsumerApplication$PollCreationMessageSpec=s;g.ConsumerApplication$OptionSpec=t;g.ConsumerApplication$ReactionMessageSpec=u;g.ConsumerApplication$RevokeMessageSpec=v;g.ConsumerApplication$ViewOnceMessageSpec=w;g.ConsumerApplication$GroupInviteMessageSpec=x;g.ConsumerApplication$LiveLocationMessageSpec=y;g.ConsumerApplication$ContactsArrayMessageSpec=z;g.ConsumerApplication$ContactMessageSpec=A;g.ConsumerApplication$StatusTextMesageSpec=B;g.ConsumerApplication$ExtendedTextMessageSpec=C;g.ConsumerApplication$LocationMessageSpec=D;g.ConsumerApplication$StickerMessageSpec=E;g.ConsumerApplication$DocumentMessageSpec=F;g.ConsumerApplication$VideoMessageSpec=G;g.ConsumerApplication$AudioMessageSpec=H;g.ConsumerApplication$ImageMessageSpec=I;g.ConsumerApplication$InteractiveAnnotationSpec=J;g.ConsumerApplication$PointSpec=K;g.ConsumerApplication$LocationSpec=L;g.ConsumerApplication$MediaPayloadSpec=M}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={NONE:0,LQ_4K:1,HQ_4K:2};b={NONE:0,GIPHY:1,TENOR:2};c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4};e={UNKNOWN:0,OPUS:1};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={};f.name="WAMediaTransport";f.internalSpec={integral:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,l],ancillary:[2,h.TYPES.MESSAGE,i]};i.name="WAMediaTransport$Ancillary";i.internalSpec={fileLength:[1,h.TYPES.UINT64],mimetype:[2,h.TYPES.STRING],thumbnail:[3,h.TYPES.MESSAGE,j],objectId:[4,h.TYPES.STRING]};j.name="WAMediaTransport$Ancillary$Thumbnail";j.internalSpec={jpegThumbnail:[1,h.TYPES.BYTES],downloadableThumbnail:[2,h.TYPES.MESSAGE,k],thumbnailWidth:[3,h.TYPES.UINT32],thumbnailHeight:[4,h.TYPES.UINT32]};k.name="WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnail";k.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],thumbnailScansSidecar:[7,h.TYPES.BYTES],thumbnailScanLengths:[8,h.FLAGS.REPEATED|h.TYPES.UINT32]};l.name="WAMediaTransport$Integral";l.internalSpec={fileSha256:[1,h.TYPES.BYTES],mediaKey:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64]};m.name="ImageTransport";m.internalSpec={integral:[1,h.TYPES.MESSAGE,o],ancillary:[2,h.TYPES.MESSAGE,n]};n.name="ImageTransport$Ancillary";n.internalSpec={height:[1,h.TYPES.UINT32],width:[2,h.TYPES.UINT32],scansSidecar:[3,h.TYPES.BYTES],scanLengths:[4,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[5,h.TYPES.BYTES],hdType:[6,h.TYPES.ENUM,a],memoriesConceptScores:[7,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.FLOAT],memoriesConceptIds:[8,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};o.name="ImageTransport$Integral";o.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};p.name="VideoTransport";p.internalSpec={integral:[1,h.TYPES.MESSAGE,r],ancillary:[2,h.TYPES.MESSAGE,q]};q.name="VideoTransport$Ancillary";q.internalSpec={seconds:[1,h.TYPES.UINT32],caption:[2,h.TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],gifPlayback:[3,h.TYPES.BOOL],height:[4,h.TYPES.UINT32],width:[5,h.TYPES.UINT32],sidecar:[6,h.TYPES.BYTES],gifAttribution:[7,h.TYPES.ENUM,b],accessibilityLabel:[8,h.TYPES.STRING],isHd:[9,h.TYPES.BOOL]};r.name="VideoTransport$Integral";r.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};s.name="AudioTransport";s.internalSpec={integral:[1,h.TYPES.MESSAGE,w],ancillary:[2,h.TYPES.MESSAGE,t]};t.name="AudioTransport$Ancillary";t.internalSpec={seconds:[1,h.TYPES.UINT32],avatarAudio:[2,h.TYPES.MESSAGE,u]};u.name="AudioTransport$Ancillary$AvatarAudio";u.internalSpec={poseId:[1,h.TYPES.UINT32],avatarAnimations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.name="AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimations";v.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],animationsType:[7,h.TYPES.ENUM,c]};w.name="AudioTransport$Integral";w.internalSpec={transport:[1,h.TYPES.MESSAGE,f],audioFormat:[2,h.TYPES.ENUM,e]};x.name="DocumentTransport";x.internalSpec={integral:[1,h.TYPES.MESSAGE,z],ancillary:[2,h.TYPES.MESSAGE,y]};y.name="DocumentTransport$Ancillary";y.internalSpec={pageCount:[1,h.TYPES.UINT32]};z.name="DocumentTransport$Integral";z.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};A.name="StickerTransport";A.internalSpec={integral:[1,h.TYPES.MESSAGE,C],ancillary:[2,h.TYPES.MESSAGE,B]};B.name="StickerTransport$Ancillary";B.internalSpec={pageCount:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],width:[3,h.TYPES.UINT32],firstFrameLength:[4,h.TYPES.UINT32],firstFrameSidecar:[5,h.TYPES.BYTES],mustacheText:[6,h.TYPES.STRING],isThirdParty:[7,h.TYPES.BOOL],receiverFetchId:[8,h.TYPES.STRING],accessibilityLabel:[9,h.TYPES.STRING]};C.name="StickerTransport$Integral";C.internalSpec={transport:[1,h.TYPES.MESSAGE,f],isAnimated:[2,h.TYPES.BOOL],receiverFetchId:[3,h.TYPES.STRING]};D.name="ContactTransport";D.internalSpec={integral:[1,h.TYPES.MESSAGE,F],ancillary:[2,h.TYPES.MESSAGE,E]};E.name="ContactTransport$Ancillary";E.internalSpec={displayName:[1,h.TYPES.STRING]};F.name="ContactTransport$Integral";F.internalSpec={vcard:[1,h.TYPES.STRING],downloadableVcard:[2,h.TYPES.MESSAGE,f],__oneofs__:{contact:["vcard","downloadableVcard"]}};g.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=a;g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=b;g.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c;g.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=e;g.WAMediaTransportSpec=f;g.WAMediaTransport$AncillarySpec=i;g.WAMediaTransport$Ancillary$ThumbnailSpec=j;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=k;g.WAMediaTransport$IntegralSpec=l;g.ImageTransportSpec=m;g.ImageTransport$AncillarySpec=n;g.ImageTransport$IntegralSpec=o;g.VideoTransportSpec=p;g.VideoTransport$AncillarySpec=q;g.VideoTransport$IntegralSpec=r;g.AudioTransportSpec=s;g.AudioTransport$AncillarySpec=t;g.AudioTransport$Ancillary$AvatarAudioSpec=u;g.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=v;g.AudioTransport$IntegralSpec=w;g.DocumentTransportSpec=x;g.DocumentTransport$AncillarySpec=y;g.DocumentTransport$IntegralSpec=z;g.StickerTransportSpec=A;g.StickerTransport$AncillarySpec=B;g.StickerTransport$IntegralSpec=C;g.ContactTransportSpec=D;g.ContactTransport$AncillarySpec=E;g.ContactTransport$IntegralSpec=F}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2};b={UNKNOWN:0,SEEN_ONCE:1,SEEN_BASED_WITH_TIMER:2,SEND_BASED_WITH_TIMER:3};c={};e={};f={};var i={},j={},k={},l={},m={},n={},o={};c.name="MessageApplication";c.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,j],metadata:[2,h.TYPES.MESSAGE,e]};e.name="MessageApplication$Metadata";e.internalSpec={forwardingScore:[5,h.TYPES.UINT32],isForwarded:[6,h.TYPES.BOOL],businessMetadata:[7,h.TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],frankingKey:[8,h.TYPES.BYTES],frankingVersion:[9,h.TYPES.INT32],quotedMessage:[10,h.TYPES.MESSAGE,f],threadType:[11,h.TYPES.ENUM,a],readonlyMetadataDataclass:[12,h.TYPES.STRING],groupId:[13,h.TYPES.STRING],groupSize:[14,h.TYPES.UINT32],groupIndex:[15,h.TYPES.UINT32],botResponseId:[16,h.TYPES.STRING],collapsibleId:[17,h.TYPES.STRING],secondaryOtid:[18,h.TYPES.STRING],chatEphemeralSetting:[1,h.TYPES.MESSAGE,o],ephemeralSettingList:[2,h.TYPES.MESSAGE,i],ephemeralSharedSecret:[3,h.TYPES.BYTES],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}};f.name="MessageApplication$Metadata$QuotedMessage";f.internalSpec={stanzaId:[1,h.TYPES.STRING],remoteJid:[2,h.TYPES.STRING],participant:[3,h.TYPES.STRING],payload:[4,h.TYPES.MESSAGE,j]};i.name="MessageApplication$Metadata$EphemeralSettingMap";i.internalSpec={chatJid:[1,h.TYPES.STRING],ephemeralSetting:[2,h.TYPES.MESSAGE,o]};j.name="MessageApplication$Payload";j.internalSpec={coreContent:[1,h.TYPES.MESSAGE,n],signal:[2,h.TYPES.MESSAGE,m],applicationData:[3,h.TYPES.MESSAGE,l],subProtocol:[4,h.TYPES.MESSAGE,k],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}};k.name="MessageApplication$SubProtocolPayload";k.internalSpec={futureProof:[1,h.TYPES.ENUM,d.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,h.TYPES.MESSAGE,d.SubProtocolSpec],businessMessage:[3,h.TYPES.MESSAGE,d.SubProtocolSpec],paymentMessage:[4,h.TYPES.MESSAGE,d.SubProtocolSpec],multiDevice:[5,h.TYPES.MESSAGE,d.SubProtocolSpec],voip:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],armadillo:[7,h.TYPES.MESSAGE,d.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}};l.name="MessageApplication$ApplicationData";l.internalSpec={};m.name="MessageApplication$Signal";m.internalSpec={};n.name="MessageApplication$Content";n.internalSpec={};o.name="MessageApplication$EphemeralSetting";o.internalSpec={ephemeralExpiration:[2,h.TYPES.UINT32],ephemeralSettingTimestamp:[3,h.TYPES.INT64],ephemeralityType:[5,h.TYPES.ENUM,b],isEphemeralSettingReset:[4,h.TYPES.BOOL]};g.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=a;g.MESSAGE_APPLICATION_EPHEMERAL_SETTING_EPHEMERALITY_TYPE=b;g.MessageApplicationSpec=c;g.MessageApplication$MetadataSpec=e;g.MessageApplication$Metadata$QuotedMessageSpec=f;g.MessageApplication$Metadata$EphemeralSettingMapSpec=i;g.MessageApplication$PayloadSpec=j;g.MessageApplication$SubProtocolPayloadSpec=k;g.MessageApplication$ApplicationDataSpec=l;g.MessageApplication$SignalSpec=m;g.MessageApplication$ContentSpec=n;g.MessageApplication$EphemeralSettingSpec=o}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c,e=a.payload;if(e==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(d("decodeProtobuf").getUnknownFields(a.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};e=e.subProtocol;if(e==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(d("decodeProtobuf").getUnknownFields(e)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:e.futureProof};e=[];b=(b=a.payload)==null||(b=b.subProtocol)==null?void 0:b.consumerMessage;c=(c=a.payload)==null||(c=c.subProtocol)==null?void 0:c.armadillo;a=(a=a.payload)==null||(a=a.subProtocol)==null?void 0:a.multiDevice;if(b!=null){if(b.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};e.push({payload:new Uint8Array(b.payload),type:"success",subprotocolType:"consumerMessage"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};e.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"armadillo"})}if(a!=null){if(a.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};e.push({payload:new Uint8Array(a.payload),type:"success",subprotocolType:"multiDevice"})}return e.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+e.length}:e[0]}g.parseMessageApplication=a}),98);
__d("lastx",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=null;if(Array.isArray(a))a.length&&(b={value:a[a.length-1]});else for(a of a)b=b||{},b.value=a;if(b)return b.value;h(0,1145)}g["default"]=a}),98);
__d("MultiKeyMap",["invariant","lastx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=typeof WeakMap==="function";a=function(){function a(){this.$1=this.$2(),this.$3=null}var b=a.prototype;b.set=function(a,b){this.$4(a);var c=this.$1;for(var d=0;d<a.length-1;d++){var e=a[d],f=this.$5(c,e).get(e);f==null&&(f=this.$2(),this.$5(c,e).set(e,f));f.type==="map"||h(0,1732);c=f}e=a[a.length-1];this.$5(c,e).set(e,{type:"value",value:b})};b.get=function(a){this.$4(a);var b=this.$6(a);b=b&&b.get(c("lastx")(a));return b==null||b.type!=="value"?void 0:b.value};b["delete"]=function(a){this.$4(a);var b=this.$6(a);return b?b["delete"](c("lastx")(a)):!1};b.$5=function(a,b){return j(b)?a.cache:a.weakCache};b.$6=function(a){var b=this.$1;for(var d=0;d<a.length-1;d++){var e,f=a[d];if(((e=b)==null?void 0:e.type)==="map")b=this.$5(b,f).get(f);else return void 0}e=c("lastx")(a);f=b&&this.$5(b,e);return f};b.$2=function(){return{type:"map",cache:new Map(),weakCache:i?new WeakMap():new Map()}};b.$4=function(a){this.$3==null&&(this.$3=a.length);if(this.$3!==a.length)throw new Error("MultiKeyMap called with different number of keys");if(a.length<1)throw new Error("MultiKeyMap called with empty array of keys")};return a}();function j(a){var b=typeof a;return b==="number"||b==="string"||b==="boolean"||a==null}g["default"]=a}),98);
__d("memoizeWithArgsWeak",["MultiKeyMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0;var d=new(c("MultiKeyMap"))();return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];var f=d.get(c);if(f!==void 0)return f;var g=a.apply(void 0,c);d.set(c,g);return g}}g["default"]=a}),98);
__d("MAWProtobufDeserializers",["FBLogger","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WAArmadilloLocallyTransformedMessage.pb","WAArmadilloMiTransportAdminMessage.pb","WAArmadilloTransportEvent.pb","WAByteArray","WAConsumerApplication.pb","WAMediaTransport.pb","WAMsgApplication.pb","WAParseMessageApplication","decodeProtobuf","memoize","memoizeWithArgsWeak","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a instanceof ArrayBuffer)return a;else return d("WAByteArray").uint8ArrayToBuffer(a)}var i=function(a){this.kind="imageTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=a.image)==null?void 0:a.payload)},j=function(a){var b;this.kind="audioTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(b=a.audio)==null?void 0:b.payload);this.ptt=a.ptt},k=function(a){var b;this.kind="videoTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(b=a.video)==null?void 0:b.payload);this.caption=a.caption},l=function(a){var b;this.kind="documentTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(b=a.document)==null?void 0:b.payload);this.fileName=a.fileName},m=function(a){this.kind="stickerTransport";this.payload=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(a=a.sticker)==null?void 0:a.payload)},n=function(a){var b=this,e;this.kind="extendedContentMessage";this.favicon=(e=c("memoize"))(function(){var a;return((a=b.payload)==null||(a=a.favicon)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null||(a=a.favicon)==null?void 0:a.payload)});this.headerImage=e(function(){var a;return((a=b.payload)==null||(a=a.headerImage)==null?void 0:a.payload)==null?null:d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.payload)==null||(a=a.headerImage)==null?void 0:a.payload)});this.previews=e(function(){var a;return(a=(a=b.payload)==null||(a=a.previews)==null?void 0:a.map(function(a){return d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,a.payload)}))!=null?a:[]});this.associatedMessage=e(function(){var a=b.payload.associatedMessage;return(a==null?void 0:a.payload)==null?null:new q(a.payload)});this.payload=a},o=function(){function a(a){this.kind="armadillo",this.bytes=h(a),this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloApplication.pb").ArmadilloSpec,a),this.payload=this.proto.payload,this.metadata=this.proto.metadata}var b=a.prototype;b.extendedContentMessage=function(){var a;a=(a=this.payload)==null||(a=a.content)==null?void 0:a.extendedContentMessage;return a==null?null:new n(a)};b.paymentsTransactionMessage=function(){var a;a=(a=this.payload)==null||(a=a.content)==null||(a=a.paymentsTransactionMessage)==null?void 0:a.extendedContentMessage;return a==null?null:new n(a)};return a}(),p=function(a){var b=this,e;this.kind="consumerApplication";this.imageMessage=(e=c("memoize"))(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.imageMessage;if(a==null)return;return new i(a)});this.audioMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.audioMessage;if(a==null)return;return new j(a)});this.videoMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.videoMessage;if(a==null)return;return new k(a)});this.documentMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.documentMessage;if(a==null)return;return new l(a)});this.stickerMessage=e(function(){var a;a=(a=b.payload)==null||(a=a.content)==null?void 0:a.stickerMessage;if(a==null)return;return new m(a)});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a);this.payload=this.proto.payload;this.metadata=this.proto.metadata},q=function(){function a(a){var b=this;this.kind="messageApplication";this.subProtocol=c("memoize")(function(){var a=d("WAParseMessageApplication").parseMessageApplication(b.proto);if(a.payload!=null){var c=a.payload;switch(a.subprotocolType){case"consumerMessage":return new p(c);case"armadillo":return new o(c);case"businessMessage":case"paymentMessage":case"multiDevice":case"voip":break;default:a.subprotocolType}}});this.bytes=h(a);this.proto=d("decodeProtobuf").decodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,a)}var b=a.prototype;b.consumerMessage=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="consumerApplication"?null:a};b.armadillo=function(){var a=this.subProtocol();return(a==null?void 0:a.kind)!=="armadillo"?null:a};return a}(),r=function(a){this.kind="transportEvent",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloTransportEvent.pb").TransportEventSpec,a)},s=function(a){this.kind="locallyTransformedMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloLocallyTransformedMessage.pb").LocallyTransformedMessageSpec,a)},t=function(a){this.kind="adminMessage",this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloMiTransportAdminMessage.pb").MiTransportAdminMessageSpec,a)},u="SKIP_CACHE",v=function(){function a(a,b){var e=this;this.payload=c("memoize")(function(){if(e.proto.encryptedTransportEvent!=null)return new r(c("nullthrows")(e.proto.encryptedTransportEvent.payload));else if(e.proto.encryptedTransportLocallyTransformedMessage!=null)return new s(c("nullthrows")(e.proto.encryptedTransportLocallyTransformedMessage.payload));else if(e.proto.encryptedTransportMessage!=null)return new q(c("nullthrows")(e.proto.encryptedTransportMessage));else if(e.proto.miTransportAdminMessage!=null)return new t(c("nullthrows")(e.proto.miTransportAdminMessage.payload));throw c("FBLogger")("messenger_web").mustfixThrow("BackupMessage proto has no payload")});this.proto=d("decodeProtobuf").decodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,a)}var b=a.prototype;b.encryptedTransportMessage=function(){var a=this.payload();if(a.kind!=="messageApplication")return;return a};b.encryptedTransportEvent=function(){var a=this.payload();if(a.kind!=="transportEvent")return;return a};b.locallyTransformedMessage=function(){var a=this.payload();if(a.kind!=="locallyTransformedMessage")return;return a};b.adminMessage=function(){var a=this.payload();if(a.kind!=="adminMessage")return;return a};return a}();v.create=c("memoizeWithArgsWeak")(function(a){return new v(a,u)});g.DeserializedImageMessage=i;g.DeserializedAudioMessage=j;g.DeserializedVideoMessage=k;g.DeserializedDocumentMessage=l;g.DeserializedStickerMessage=m;g.DeserializedExtendedContentMessage=n;g.DeserializedArmadilloApplication=o;g.DeserializedConsumerApplication=p;g.DeserializedMessageApplication=q;g.DeserializedTransportEvent=r;g.DeserializedLocallyTransformedMessage=s;g.DeserializedAdminMessage=t;g.DeserializedBackupMessage=v}),98);
__d("WADbTransactor",["MAWDexie","MAWIndexedDb","MAWTransactionMode","WAExceededStorageQuota","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=Object.keys(a),f=e.some(function(b){return a[b]===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY;return function(){for(var a=arguments.length,g=new Array(a),i=0;i<a;i++)g[i]=arguments[i];return d("MAWIndexedDb").getSignalDB(b).then(function(a){return h(f,e,function(){return c(a.stores).apply(void 0,g)})}).then(function(a){return a})["catch"](function(a){throw k(a,b)})}}function h(a,b,e){if(c("MAWDexie").currentTransaction!=null)throw c("err")("protocolDB transactor %s cannot be called within another transaction");return d("MAWIndexedDb").getSignalDB().then(function(c){return c.transact(a,b,e)})}function i(a){if(a instanceof Error)return a;else if(typeof a==="string")return c("err")(a);else return null}function e(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=a+"_"+e,g=(yield d("MAWIndexedDb").getDB(f));return g.transact(b,[a],function(){return c(g.stores[a])}).then(function(a){return a})["catch"](function(a){throw k(a,f)})});return j.apply(this,arguments)}function k(a,b){var e;d("WAExceededStorageQuota").checkQuotaExceededError(a);a=i(a);if(!a)return c("err")("[unknown error] Error performing %s transaction "+b);a.message="["+((e=a==null?void 0:a.toString())!=null?e:"unknown error")+"] Error performing %s transaction "+b;return a}g.makeSignalTransactor=a;g.persistedQueueTransactor=e}),98);
__d("WAClearSignalStores",["MAWDexieTable","MAWTransactionMode","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";a=d("WADbTransactor").makeSignalTransactor({tasks:d("MAWTransactionMode").READWRITE},"clearSignalStores",function(a){return function(){return d("MAWDexieTable").dexieAll([a.tasks.clear()]).then(function(){})}});g.clearSignalStores=a}),98);
__d("WAHandleFailureUtils",["FBLogger","ODS","Promise","WABridge","WAOdsEnums","asyncToGeneratorRuntime","getErrorSafe","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MAWClearSignalAndTempStores").__setRef("WAHandleFailureUtils");f={GENERIC_FAILURE:"400",NOT_AUTHORIZED:"401",TEMP_BANNED:"402",BANNED:"403",CAT_EXPIRED:"413",CAT_INVALID:"414",NOT_FOUND:"415",CAT_SESSION_INVALID:"418",INTERNAL_ERROR:"500",SERVER_UNAVAILABLE:"503"};function k(){return new(i||(i=b("Promise")))(function(a,b){j.onReady(function(d){c("promiseDone")(d.clearSignalAndTempStores(),function(){return a()},function(a){a=c("getErrorSafe")(a);c("FBLogger")("wmi").catching(a).mustfix("Failed to clear signal and temp stores");b(a)})})})}function a(){return k().then(function(){d("WABridge").getBridge().fireAndForget("event","logout",{})})}function e(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield k(),(h||(h=d("ODS"))).bumpEntityKey(3185,d("WAOdsEnums").Entity.WA_REREGISTRATION,"reregister_phone"),d("WABridge").getBridge().fireAndForget("event","reregisterDevice",{})});return l.apply(this,arguments)}g.FAILURE_CODES=f;g.clearRegistrationAndTempData=k;g.deregisterPhone=a;g.reregisterPhone=e}),98);
__d("WASignalDB",["BrowserLockManager","QPLFlow","WAHandleFailureUtils","WAHex","WAIDBTypes","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver","WormIDbUtils","asyncToGeneratorRuntime","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i={identity:{primaryKey:"deviceJid",indexes:{userJid:{fields:["userJid"],unique:!1}}},contacts:{primaryKey:"contactJid",indexes:{}},session:{indexes:{},primaryKey:"id"},senderKeySessions:{primaryKey:"id",indexes:{groupJid:{fields:["groupJid"],unique:!1},userJid:{fields:["userJid"],unique:!1}}},prekey:{indexes:{},primaryKey:"keyId"},prekeyGeneration:{indexes:{},primaryKey:"generationId"},signedPrekey:{indexes:{},primaryKey:"keyId"},meta:{indexes:{},primaryKey:"key"},plaintextMeta:{indexes:{},primaryKey:"key",secure:!1},icdcFails:{indexes:{},primaryKey:"contactJid"},personalSenderKeyStatuses:{indexes:{},primaryKey:"groupJid"}},j,k=new(d("WAResolvable").Resolvable)();function a(a,b,c,d,e,f){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,l,m){var o=m!=null?d("QPLFlow").startQPLFlow(m,{timeoutInMs:c("justknobx")._("3415"),annotations:{string:{operationType:"initDb"}}}):null;try{yield n(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=d("WAHex").parseHex(e),c="signalDb";b=new(d("WormEAR").WormEAR)(i,c,b);c=new(d("Worm").WormDatabase)(new(d("WormIDbDriver").WormIDbDriver)(a,c,i,b,l,{blockingErrorThreshold:f,onBlockingError:g,safeToDeleteStores:new Set(["stanzaQueue","danglingQueue","migration"]),onTransactionError:function(b){if(b instanceof d("WormEAR").DecryptionError){b=b;if(b.store==="icdcFails")return;void d("WormIDbUtils").promisifyIDbRequest(d("WAIDBTypes").idb().deleteDatabase(a)).then(function(){return d("WAHandleFailureUtils").reregisterPhone()})}}}),m);j=c;yield c.init({eventFlow:o});k.resolve(c);o==null||o.endSuccess()}))}catch(a){o==null||o.endFail("error");d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[WORM] Error performing initDb: ",""])),a);throw a}});return l.apply(this,arguments)}function e(){if(j==null)throw c("err")("Signal Db v3 is not initialized");return j}function f(){return k.promise}function m(a){return"Signal - "+a}function n(a){return c("BrowserLockManager")!=null?c("BrowserLockManager").request("wajs_make_signal_v3_db",a):a()}g.makeSignalDb=a;g.getDb=e;g.getDbPromise=f;g.signalOp=m}),98);
__d("WAClearSignalStoresV2",["Promise","WASignalDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){return d("WASignalDB").getDb().runInTransaction(["identity","contacts","meta","prekey","prekeyGeneration","senderKeySessions","session","signedPrekey","personalSenderKeyStatuses"],"readwrite",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield (h||(h=b("Promise"))).all([a.stores.identity.clear(),a.stores.contacts.clear(),a.stores.meta.clear(),a.stores.prekey.clear(),a.stores.prekeyGeneration.clear(),a.stores.senderKeySessions.clear(),a.stores.session.clear(),a.stores.signedPrekey.clear(),a.stores.personalSenderKeyStatuses.clear()])});return function(b){return a.apply(this,arguments)}}(),d("WASignalDB").signalOp("clearSignalStores"))};g.clearSignalStores=a}),98);
__d("MAWClearSignalAndTempStores",["MAWDeleteOldLogsFromDisk","MAWJobActionsV2","MAWJobsIndexedDb","MAWLoggingSwitches","MAWTransactionMode","Promise","WAClearSignalStores","WAClearSignalStoresV2","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MAWJobsIndexedDb").makeJobsTransactor("jobs",d("MAWTransactionMode").READWRITE,"clearJob")(d("MAWJobActionsV2").clearJobs);a=function(){return(h||(h=b("Promise"))).all([d("MAWLoggingSwitches").removeLoggingFromBridge&&d("MAWDeleteOldLogsFromDisk").clearLogs(),d("WAClearSignalStores").clearSignalStores(),i(),d("WAClearSignalStoresV2").clearSignalStores()]).then(c("emptyFunction"))};g.clearSignalAndTempStores=a}),98);
__d("MAWDbEditMsgHistory",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}function b(a){return(h||(h=d("I64"))).of_float(a)}function c(a){return(h||(h=d("I64"))).to_float(a)}g.unsafeCoerceToEditMsgHistoryId=a;g.convertToEditMsgHistoryId64=b;g.convertToEditMsgHistoryId=c}),98);
__d("MAWDbPoll",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a,b){a=(a+b).split("");return Math.abs(a.reduce(function(a,b){b=b.charCodeAt(0);a=(a<<5)-a+b;a&=a;return a},0))}f.convertStringToOptionHash=a;f.convertOptionHashToString=b;f.generateStableIdFromOptionHash=c}),66);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("CurrentMessengerUser").getAppID();f=f!=null?f.toString():"unknown";f=a+"."+f;(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),f,b,e!=null?e:1);h.bumpEntityKey(c("MWEBODSCategory"),a,b,e!=null?e:1)}g.markODSForEB=a}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.call(this,!1)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.isConnected=function(){return this.get()};c.waitForConnection=function(){return this.waitForValue(!0)};return b}(d("WAGenericStateManager").WAGenericStateManager);b=new a();g.WACommsConnectionState=b}),98);
__d("WAGetHashFromProtocolMsgId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.externalId+"_"+a.author+"_"+a.chat}f.getHashFromProtocolMsgId=a}),66);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBODSUtils","ODS","QPLUserFlow","QuickPerformanceLogger","WACommsConnectionState","WAExceededStorageQuota","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={ERROR_FETCHING_DB_MESSAGE:"error_fetching_db_message",FAILED_TO_ACK_MESSAGE:"failed_to_ack_message",FAILED_TO_CONSTRUCT_ECHO_MESSAGE:"failed_to_construct_echo_message",MESSAGE_UPLOAD_TIMEOUT:"message_upload_timeout",RUNTIME_ERROR:"runtime_error"};function a(a,b,e,f,g,h,j,k,m){g===void 0&&(g=!1);h===void 0&&(h=!1);k===void 0&&(k="unknown");m===void 0&&(m=0);if(!c("MAWEBSwitch").isEnabled())return;c("QPLUserFlow").start(c("qpl")._(521481602,"829"),{annotations:{bool:{eb_switch:c("MAWEBSwitch").isEnabled(),eb_upload_queue:!0,fromUploadQueue:g,is_retroactive_upload:h,middleware_init:!1},"int":{attachmentsSize:j!=null?j:0,instanceKey:f,retryCount:m},string:{comms_status:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected",externalId:a,msgType:b,payloadType:k,triggerType:e}},instanceKey:f,timeoutInMs:c("justknobx")._("1405")});l(f,"upload_tracking_started");(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").START);d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+(b!=null?b:"unknown"));g=d("MAWMsgType").isMAWSupportedMediaType(b!=null?b:"Text")?"media":"non-media";d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+g)}function k(a){return a==null?{string:{comms_status_on_failure:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"}}:babelHelpers["extends"]({},a,{string:babelHelpers["extends"]({},a.string,{comms_status_on_failure:d("WACommsConnectionState").WACommsConnectionState.isConnected()===!0?"connected":"disconnected"})})}function b(a,b,c,d){switch(a){case"success":o(b,c,d);break;case"fail":n(b,c,d);break;case"point":l(b,c,d);break}}function l(a,b,d){d&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),d,{instanceKey:a}),c("QPLUserFlow").addPoint(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function m(a,b){var e;c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(b),{instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:b==null||(e=b.string)==null?void 0:e.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").CANCEL)}function n(a,b,e){var f;c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),k(e),{instanceKey:a});c("QPLUserFlow").endFailure(c("qpl")._(521481602,"829"),b,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null||(f=e.string)==null?void 0:f.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").FAIL)}function o(a,b,c){l(a,b),p(a,c)}function p(a,b){b&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),b,{instanceKey:a}),c("QPLUserFlow").endSuccess(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},instanceKey:a}),(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").SUCCESS)}function e(a,b,e){var f;l(a,b);e&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),e,{instanceKey:a});c("QPLUserFlow").endTimeout(c("qpl")._(521481602,"829"),{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{threadID:e==null||(f=e.string)==null?void 0:f.jid}},instanceKey:a});(i||(i=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").TIMEOUT)}function f(a,b,d){var e=c("qpl")._(521481602,"829");l(a,b);d&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(e,d,{instanceKey:a});(h||(h=c("QuickPerformanceLogger"))).markerEnd(e,52,a,h.currentTimestamp())}function q(){return d("WAHashStringToNumber").hashStringToNumber(d("MAWExternalId").generateExternalId())}function r(a,b){b===void 0&&(b=0);return d("WAHashStringToNumber").hashStringToNumber(d("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(a)+"_"+d("WAGlobals").getMyDeviceJid()+"_"+b)}function s(a){return c("MAWEBSwitch").isEnabled()&&d("MAWMsgType").isEBSupportedMsgType(a.type)&&a.ack>=d("MAWAckLevel").ACK.sent&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)}function t(a){return{addAnnotations:function(b){u(a,b)},addPoint:function(b,c){l(a,b,c)},endCancel:function(b,c){m(a,c)},endFail:function(b,c){n(a,b,c)},endSuccess:function(b){p(a,b)},getQPLAttrs:function(){return{event:c("qpl")._(521481602,"829"),instanceKey:a}},isActive:function(){return!0}}}function u(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function v(a,b){return a.get(b)}function w(a,b,c,d,e){b=v(b,c);if(b!=null)switch(a){case"success":o(b,d,e);break;case"fail":n(b,d,e);break;case"point":l(b,d,e);break}}g.EBUploadTrackingWorkerFailurePoints=j;g.startUploadTracking=a;g.handleBridgeEbUploadTrackingQPL=b;g.addPointWorkerOnly=l;g.endCancelWorkerOnly=m;g.endFailWorkerOnly=n;g.endSuccessWorkerOnly=o;g.endTimeoutWorkerOnly=e;g.endRetryWorkerOnly=f;g.genInstanceKeyOnly=q;g.genInstanceKeyForUploadQueue=r;g.isUploadSupported=s;g.makeEBWorkerQplFlowFromInstanceKey=t;g.addAnnotationsForEBWorkerQplFlow=u;g.getUploadTrackingInstanceKey=v;g.addUploadTrackingByType=w}),98);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case 1:return;case 3:c("MAWEBSwitch").set(!0);return;case 2:case 4:default:c("MAWEBSwitch").set(!1);return}}function b(a){return a===4||a===3}g.setEncryptedBackupsState=a;g.eligibleForEBUX=b}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=300;b=600;c=900;e=1800;d=Math.imul((f=d("WATimeUtils")).HOUR_SECONDS,6);var h=Math.imul(f.HOUR_SECONDS,12),i=Math.imul(f.DAY_SECONDS,14),j=1e3,k=5,l=10,m=30,n=60,o=d;g.fiveMinutesInSeconds=a;g.tenMinutesInSeconds=b;g.fifteenMinutesInSeconds=c;g.thirtyMinutesInSeconds=e;g.oneHourInSeconds=f.HOUR_SECONDS;g.sixHoursInSeconds=d;g.twelveHoursInSeconds=h;g.oneDayInSeconds=f.DAY_SECONDS;g.ephemeralMaxDelectionWindowForUnseenMessage=i;g.msPerSec=j;g.fiveSeconds=k;g.tenSeconds=l;g.thirtySeconds=m;g.oneMinuteInSeconds=n;g.ephemeralReportingWindowInSeconds=o}),98);
__d("MAWGetUserDeviceChangeAdminType",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case"add":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}g.getUserDeviceAdminType=a}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15740")}g.isFbProfileDirectoryItemXmaEnabled=a}),98);
__d("MAWIsLiveLocationXmaEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("3758")===!0}g.isLiveLocationXmaEnabled=a}),98);
__d("MAWJobDefinitions",["MAWExternalId"],(function(a,b,c,d,e,f,g){"use strict";var h=["s2sInstanceKey","s2sUserFlowQPLEvent"],i=["scheduleConfig"];function a(a){return a}function b(a){return a}f={acceptGroupInvite:function(a,b,c,d,e,f){f=k(f);return{args:{chatJid:a,inviteCode:d,invitedParticipantUserId:c,inviteExpirationTs:e,inviterUserId:b},scheduleConfig:f!=null?f:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(a,b,c,d){d=k(d);return{args:{group:a,s2sInstanceKey:c,users:b},scheduleConfig:d!=null?d:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(a,b){b=k(b);return{args:{msgIds:a},scheduleConfig:b!=null?b:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(a,b,c,d,e,f,g,h){f=k(h);return{args:{downloadType:e,hash:b,metricInstanceKeys:g,msgType:d,protocolMsgId:a,qplEntryPoint:c},scheduleConfig:f!=null?f:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(a,b,c,e,f,g,i){i=k(i);c=c!=null?c:{};var j=c.s2sInstanceKey;c.s2sUserFlowQPLEvent;c=babelHelpers.objectWithoutPropertiesLoose(c,h);return{args:{args:c,chatJid:a,ephemeralSetting:e,externalId:f!=null?f:d("MAWExternalId").generateExternalId(),isFirstMsg:g,protocolMsgId:b,s2sInstanceKey:j},scheduleConfig:i!=null?i:void 0,type:"forwardMsg"}},getSpams:function(a){a=k(a);return{args:void 0,scheduleConfig:a!=null?a:void 0,type:"getSpams"}},handleFutureproofMsg:function(a){a=k(a);return{args:{},scheduleConfig:a!=null?a:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(a){a=k(a);return{args:void 0,scheduleConfig:a!=null?a:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(a,b){var c=a.chatJid,d=a.context,e=a.frxParams,f=a.frxTags,g=a.msgs,h=a.reportedMessageId,i=a.spamFlow;a=a.userJid;b=k(b);return{args:{chatJid:c,context:d,frxParams:e,frxTags:f,msgs:g,reportedMessageId:h,spamFlow:i,userJid:a},scheduleConfig:b!=null?b:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(a,b){var c=a.actorID;a=a.taskID;b=k(b);return{args:{actorID:c,taskID:a},scheduleConfig:b!=null?b:void 0,type:"igdSendMsg"}},leaveGroups:function(a,b){b=k(b);return{args:{groups:a},scheduleConfig:b!=null?b:void 0,type:"leaveGroups"}},markThreadAsRead:function(a,b,c,d,e,f){f=k(f);return{args:{chatJid:a,isBlocked:c,isReadReceiptsDisabled:e,isRestricted:d,relationship:b},scheduleConfig:f!=null?f:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(a,b,c){c=k(c);return{args:{group:a,users:b},scheduleConfig:c!=null?c:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(a,b,c,d,e,f,g,h,i,j){i=k(i);return{args:{chatJid:c,context:f,frxParams:g,frxTags:e,isIgd:d,openMsgs:j,reportedMessageId:h,spamFlow:b,userJid:a},scheduleConfig:i!=null?i:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(a,b){b=k(b);return{args:{appDataExternalId:a},scheduleConfig:b!=null?b:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(a,b,c,d,e,f,g,h,i,j,l,m,n,o,p){n=k(n);return{args:{deanonApiPayload:o,hasMoreAfter:e,hasMoreBefore:d,instanceKey:j,isMediaGalleryRestore:p,isPointQuery:f,messages:c,minMsgId:g,optimisticMsgs:l,startSortKey:i,taskSource:m,threadId:b,traceId:h,transportKey:a},scheduleConfig:n!=null?n:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(a,b,c,d,e,f,g,h,i,j,l,m,n,o,p,q){m=k(m);return{args:{chatJid:q,deanonApiPayload:o,echoMessages:a,hasMoreAfter:f,hasMoreBefore:e,instanceKey:l,isMediaGalleryRestore:p,isPointQuery:g,messages:d,minMsgId:h,referenceTimestamp:j,requestId:i,taskSource:n,threadId:c,transportKey:b},scheduleConfig:m!=null?m:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(a,b){b=k(b);return{args:a,scheduleConfig:b!=null?b:void 0,type:"revokeMsgs"}},sendAppData:function(a,b,c){c=k(c);return{args:{args:a,externalId:b!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:c!=null?c:void 0,type:"sendAppData"}},sendBumpMsg:function(a,b,c,e){e=k(e);return{args:{args:b,chatJid:a,externalId:c!=null?c:d("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(a,b,c){c=k(c);return{args:{args:a,externalId:b!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:c!=null?c:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x){s=k(s);return{args:{args:{duration:j,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:i,jpegThumbnailWidth:h,mediaGroupMetadata:x,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:c,source:t,width:f},attachmentType:w,chatJid:a,externalId:r!=null?r:d("MAWExternalId").generateExternalId(),file:b},scheduleConfig:s!=null?s:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(a,b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y){s=k(s);return{args:{args:{duration:j,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:i,jpegThumbnailWidth:h,mediaGroupMetadata:y,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:w,source:t,width:f},attachmentType:x,chatJid:a,externalId:r!=null?r:d("MAWExternalId").generateExternalId(),mimeType:b,plaintext:c},scheduleConfig:s!=null?s:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(a,b){b=k(b);return{args:{appDataExternalId:a},scheduleConfig:b!=null?b:void 0,type:"sendWrittenAppData"}},setGroupMemberAddMode:function(a,b,c){c=k(c);return{args:{groupJid:a,memberAddMode:b},scheduleConfig:c!=null?c:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(a,b,c){c=k(c);return{args:{group:a,subject:b},scheduleConfig:c!=null?c:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(a,b){b=k(b);return{args:{qplInstanceKey:a},scheduleConfig:b!=null?b:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(a,b,c,d){d=k(d);return{args:{backupEntFbid:b,deliveryObjectId:a,traceId:c},scheduleConfig:d!=null?d:void 0,type:"updateBackupEntFbidForMedia"}}};function c(a,b){return j(a,b)}function j(a,b){var c=b.scheduleConfig,e=babelHelpers.objectWithoutPropertiesLoose(b,i);c={args:{},scheduleConfig:c,type:a};b.externalIdJob&&(c.args.externalId=d("MAWExternalId").generateExternalId());c.args=babelHelpers["extends"]({},c.args,e);b.uniqueJob&&(c.uniqKey=a);return c}function k(a){if(a==null)return;return{jobId:a.jobId,maxTimeoutMs:a.maxTimeoutMs,priority:a.priority}}function e(a){return{otid:a.toplevelProtobuf.messageId,supplementalProtobufs:new Map(a.supplementalProtobufs.entries().map(function(a){var b=a[0];a=a[1];return[b,{decryptedProtobuf:a.payload,protobufTimestampMS:a.timestampMs}]})),tags:a.tags,toplevelProtobuf:{decryptedProtobuf:a.toplevelProtobuf.payload,protobufTimestampMS:a.toplevelProtobuf.timestampMs}}}g.toThreadJidPrimaryId=a;g.toEncodedEchoMessage=b;g.jobSerializers=f;g.createStartJobInfo=c;g.createStartJobInfoGeneric=j;g.serializeJobScheduledConfig=k;g.mpsMessageToEncryptedBackupsMessage=e}),98);
__d("MAWMainTraceUtils",["LSRequestId"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("LSRequestId").generate()}g.createTraceId=a}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]);c=a;f["default"]=c}),66);
__d("MAWSharedProtocolQueueConst",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});f.OfflineConsumerStatus=a}),66);
__d("MAWOfflineQueueStatus",["FBLogger","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=!1;function j(a,b){h.set(a,b),h.size>5e3&&c("FBLogger")("wmi_eb").warn("Offline queue status map size (%s) is too large",h.size)}function k(a){return h.get(a)}function a(){h=new Map(),i=!1}function b(){return i}function e(){i=!0}function f(a,b){a=Object.keys(a);a.map(function(a){j(a,b)})}function l(a){return k(a)===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}function m(){return Array.from(h.entries()).filter(function(a){a[0];a=a[1];return a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete&&a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed}).map(function(a){a=a[0];return a})}g.setOfflineQueueStatus=j;g.getOfflineQueueStatus=k;g.resetOfflineQueueState=a;g.isOfflineQueueComplete=b;g.markOfflineQueueComplete=e;g.markThreadWithOfflineQueueStatus=f;g.isOfflineQueueDoneForThread=l;g.getAllThreadsWithOfflineQueueIncomplete=m}),98);
__d("MWXMAV2IsDataclassLiveLocationXMA",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return!1;a=JSON.parse(a);if(a==null)return!1;a=a.content;if(a==null||(a==null?void 0:a.__typename)!=="XMSGXmaSingleContent")return!1;a=a.custom_template_data;if(a==null||(a==null?void 0:a.__typename)!=="XMSGXmaLocationTemplateData")return!1;a=a.location_metadata;return a==null||(a==null?void 0:a.__typename)!=="XMSGXmaLiveLocationMetadata"?!1:!0}f.isDataclassLiveLocationXMA=a}),66);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","MAWIsLiveLocationXmaEnabled","MWXMAV2IsDataclassLiveLocationXMA","WAArmadilloXMA.pb","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set([(b=d("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);function a(a){var b=a.fbTargetType,e=a.silentExposure;a=a.xmaDataclass;if(b!=null&&h.has(b))return!0;e=e!=null?e:!1;switch(b){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return e?c("gkx")("9338"):c("gkx")("9339");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return a!=null&&d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(a)?d("MAWIsLiveLocationXmaEnabled").isLiveLocationXmaEnabled():!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return d("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:c("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(b));return!1}}g.FB_FULLY_SUPPORTED_TARGET_TYPES=h;g.isFBSupportedTargetType=a}),98);
__d("MAWParseXMAUnsupportedMessageType",["MWXMAV2IsDataclassLiveLocationXMA","WAArmadilloXMA.pb"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){c===void 0&&(c=!1);if(a==null)return null;if(c)return"paymentsTransactionMessage";switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(b)?"liveLocationMessage":"locationMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return"postMentionMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return"messengerMemory";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return"rtcMessage";default:return null}}g.getXMAUnsupportedMessageType=a}),98);
__d("RavenMessagingState",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f["default"]=a}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return c("RavenMessagingState").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return c("RavenMessagingState").UNSEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return c("RavenMessagingState").SEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return c("RavenMessagingState").REPLAYED;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return c("RavenMessagingState").EXPIRED}},i=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return c("EphemeralMediaViewMode").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return c("EphemeralMediaViewMode").REPLAYABLE;case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return c("EphemeralMediaViewMode").READ_ONCE}};b=function(a,b){return{ephemeralMediaState:b,ephemeralMediaViewMode:i(a)}};function a(a,b){switch(b){case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?c("RavenMessagingState").SEEN:h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN)return c("RavenMessagingState").SEEN;else if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN)return c("RavenMessagingState").REPLAYED;return h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=i;g.deriveRavenSettings=b;g.getNextRavenMessageEphemeralState=a}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_exchange_vm";function j(){var a=d("MAWVaultMaterials").generateNewVaultMaterials(),e="newly-generated";return new(h||(h=b("Promise")))(function(b){c("WebAsyncStorage").getOrSetItem(i,a,function(c,f){if(c!=null){var g=d("MWFBLogger").MWLogger();if(c instanceof Error)throw g.catching(c).mustfixThrow("Failed to store Vaulting Materials. %s",c.toString());else g.mustfix("Failed to store Vaulting Materials.")}f!==null&&(a=f,e="storage");b(d("MAWVaultMaterials").initializeVaultMaterials(a,e))})})}function a(){return d("MAWVaultMaterials").hasVaultBeenSetup()?(h||(h=b("Promise"))).resolve(d("MAWVaultMaterials").getVaultMaterials()):j()}g.setupVaultMaterials=a}),98);
__d("MpsToBridgeMessageId",["MAWJidUtils","MpsTypes","WAJids","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWJidUtils").formatProtocolMsgIdFromExternalId(d("WAJids").unsafeCoerceToChatJid(a),d("WAStanzaUtils").toStanzaId(b))}function b(a){a=a.split(".");var b=a[0];a=a[1];return{messageId:d("MpsTypes").toMessageId(a),threadId:d("MpsTypes").toThreadId(b)}}g.mpsToBridgeMsgId=a;g.bridgeMsgIdToMps=b}),98);
__d("MpsMessageToBridgeWrapper",["MAWProtobufDeserializers","MAWUserJidWrapper","MpsToBridgeMessageId","WAJids","WATimeUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAJids").createJidUtils({platform:"msgr"});a=function(){function a(a,b){this.message=a,this.topLevel=b}a.fromTopLevel=function(b){return new a(b,b)};a.fromSupplemental=function(b,e){var f=d("MAWProtobufDeserializers").DeserializedBackupMessage.create(b.payload);f={messageId:b.messageId,payload:b.payload,senderId:c("nullthrows")((f=f.proto.metadata)==null?void 0:f.senderId),threadId:e.threadId,timestampMs:b.timestampMs};return new a(f,e)};var b=a.prototype;b.getChatJid=function(){return d("WAJids").unsafeCoerceToChatJid(this.message.threadId)};b.getExternalId=function(){return this.message.messageId};b.getMsgId=function(){return d("MpsToBridgeMessageId").mpsToBridgeMsgId(this.message.threadId,this.message.messageId)};b.getSenderJid=function(){return h.toUserJid(this.message.senderId)};b.topLevelMetadata=function(){return a.fromTopLevel(this.topLevel)};b.isAuthorMe=function(){return d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())===this.message.senderId};b.getAuthor=function(){return this.isAuthorMe()?d("WAJids").AUTHOR_ME:this.getSenderJid()};b.getUnixTs=function(){return d("WATimeUtils").castMilliSecondsToUnixTime(this.message.timestampMs)};b.deserialize=function(){return d("MAWProtobufDeserializers").DeserializedBackupMessage.create(this.message.payload)};return a}();g.MpsMessageToBridgeWrapper=a}),98);
__d("WADbContact",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;f.NON_CONTACT=a;f.ONE_WAY_CONTACT=b;f.REVERSED_ONE_WAY_CONTACT=c;f.TWO_WAY_CONTACT=d}),66);
__d("WADbDeviceRegistration",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=25;b=6;d=b;e="https://reg-e2ee.facebook.com";f=c("gkx")("13108")?"https://reg-e2ee.messenger.com":e;c="https://v.whatsapp.net";var h="https://reg-e2ee.instagram.com",i="/v2/fb_icdc_fetch",j="/v2/fb_register_v2",k="Device has already been registered to WA servers",l="Device registration finished successfully",m="Device registration retries failed "+b+" times. No longer attempting registration.",n="Device registration response was null",o="Current user id is zero",p="CryptoAuthToken is empty",q="CryptoAuthToken is expired",r={failed:"failed",finished:"finished"};g.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=a;g.MAX_DEVICE_REGISTRATION_RETRIES=b;g.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=d;g.REG_FB_DOMAIN=e;g.REG_MSGR_DOMAIN=f;g.REG_WA_DOMAIN=c;g.REG_IGD_DOMAIN=h;g.ICDC_ENDPOINT=i;g.REGISTRATION_ENDPOINT=j;g.DEVICE_ALREADY_REGISTERED=k;g.DEVICE_SUCCESSFULLY_REGISTERED=l;g.FAILED_REGISTRATION_RETRIES=m;g.NULL_RESPONSE_FROM_SERVER=n;g.DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID=o;g.DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN=p;g.DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN=q;g.RegistrationStatesEnum=r}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("WAMedia",[],(function(a,b,c,d,e,f){"use strict";a="Image";b="Video";c="Ptt";d="Gif";e="Sticker";var g="DocumentFile",h={IMAGE:a,VIDEO:b,PTT:c,GIF:d,STICKER:e,DOCUMENT_FILE:g};f.IMAGE=a;f.VIDEO=b;f.PTT=c;f.GIF=d;f.STICKER=e;f.DOCUMENT_FILE=g;f.MEDIA_TYPE=h}),66);
__d("WAMediaHdType",[],(function(a,b,c,d,e,f,g){"use strict";a=0;b=1;c=2;d={HD_TYPE_NONE:a,HD_TYPE_LQ_4K:b,HD_TYPE_HQ_4K:c};g.HD_TYPE_NONE=a;g.HD_TYPE_LQ_4K=b;g.HD_TYPE_HQ_4K=c;g.HD_TYPE=d}),98);
__d("WAMediaQplHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null||a<0||a>1e3*1024*1024)return"invalid_size";else if(a===0)return"size equal to 0KB";else if(a<=1*1024)return"size lower than 1 KB";else if(a<=50*1024)return"size between 1 KB and 50 KB";else if(a<=100*1024)return"size between 50 KB and 100 KB";else if(a<=500*1024)return"size between 100 KB and 500 KB";else if(a<=1*1024*1024)return"size between 500 KB and 1 MB";else if(a<=2*1024*1024)return"size between 1 MB and 2 MB";else if(a<=5*1024*1024)return"size between 2 MB and 5 MB";else if(a<=10*1024*1024)return"size between 5 MB and 10 MB";else if(a<=20*1024*1024)return"size between 10 MB and 20 MB";else if(a<=25*1024*1024)return"size between 20 MB and 25 MB";else if(a<=30*1024*1024)return"size between 25 MB and 30 MB";else if(a<=50*1024*1024)return"size between 30 MB and 50 MB";else if(a<=75*1024*1024)return"size between 50 MB and 75 MB";else if(a<=100*1024*1024)return"size between 75 MB and 100 MB";else return"size above 100 MB"}f.convertIntegerSizeToStringBucket=a}),66);
__d("WAPREList",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",EBDB_INIT:"ebdb_init",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});f.PRE_METRIC=a}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;c=6e4;e=18e4;f=10*60*1e3;var k=0;function a(){var c=[];function e(a){c.push(a)}function b(){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),c.length=0}function a(a){c.length===0&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),a.name,a.stage),c.forEach(function(b){b(a)})}return{subscribe:e,notify:a,clear:b}}a=a();var l=a.notify,m=a.clear;a=a.subscribe;var n;"FinalizationRegistry"in self&&"WeakRef"in self&&(n=new FinalizationRegistry(function(a){var b=a.event;a=a.eventFlow;if(a.isActive())try{d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),b)}catch(a){}}));var o=new Set([d("WAPREList").PRE_METRIC.SEND_MESSAGE,d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function b(a,b,c,d){c==null&&k++;var e=c!=null?c:k,f="open";c==null?l({name:a,stage:"START",instanceKey:e,annotations:b,timeoutInMs:d}):l({name:a,stage:"RESUME",instanceKey:e,annotations:b});var g;function h(){if(g!=null){var a=g.deref();if(a!=null){var b;(b=n)==null||b.unregister(a)}}}d={addPoint:function(c,b){l({name:a,stage:"POINT",reason:c,instanceKey:e,annotations:b})},addAnnotations:function(b){l({name:a,stage:"ANNOTATE",instanceKey:e,annotations:b})},endSuccess:function(b){l({name:a,stage:"SUCCESS",instanceKey:e,annotations:b}),f="closed",h()},endCancel:function(b){l({name:a,stage:"CANCEL",instanceKey:e,annotations:b}),h()},endFail:function(c,b){l({name:a,stage:"FAIL",reason:c,instanceKey:e,annotations:b}),f="closed",h()},getFlowDetails:function(){return{name:a,instanceKey:e}},isActive:function(){return f==="open"}};n&&!o.has(a)&&c==null&&(n.register(d,{event:a,eventFlow:{endCancel:d.endCancel,isActive:d.isActive}}),g=new WeakRef(d));return d}g.QPL_DEFAULT_TIMEOUT_IN_MS=c;g.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=e;g.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=f;g.clear=m;g.subscribe=a;g.startMetric=b}),98);
__d("WAParseReadOnlyMetadataDataclassUtils",["err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if((a==null?void 0:a.readonlyMetadataDataclass)!=null)try{a=JSON.parse(a==null?void 0:a.readonlyMetadataDataclass);return a}catch(a){throw c("err")("Failed to parse readonly metadata dataclass JSON")}return null}function a(a){var b;a=h(a);return(a==null||(b=a.power_up)==null?void 0:b.power_up_style)!=null}function b(a){var b;a=h(a);return(a==null||(b=a.note_metadata)==null?void 0:b.message_type)==="MENTION"}g.isPowerUp=a;g.isNoteMention=b}),98);
__d("WAPromiseQueue",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){a===void 0&&(a=-1),this.$1=(g||(g=b("Promise"))).resolve(),this.$3=0,this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){var d=this;this.$3++;b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=h(b,this.$2)["finally"](function(){d.$3--});return c};c.enqueue=function(a){var b=this;this.$3++;a=this.$1.then(a);var c=a.then();this.$1=h(a,this.$2)["finally"](function(){b.$3--});return c};c.size=function(){return this.$3};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||(g||(g=b("Promise"))).resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1["delete"](a)};e=h(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function h(a,c){if(c>=0)return new(g||(g=b("Promise")))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(i,i)}function i(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);
__d("getMediaTypeFromConsumerMessage",["WAMediaTransport.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;a=a==null||(b=a.payload)==null?void 0:b.content;if((a==null?void 0:a.audioMessage)!=null)return"ptt";if((a==null?void 0:a.videoMessage)!=null){var c,e,f,g=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,a==null||(c=a.videoMessage)==null||(c=c.video)==null?void 0:c.payload);return(g==null||(e=g.ancillary)==null?void 0:e.gifPlayback)===!0||(g==null||(f=g.ancillary)==null?void 0:f.gifAttribution)!=null?"gif":"video"}if((a==null?void 0:a.documentMessage)!=null)return"document";if((a==null?void 0:a.stickerMessage)!=null)return"sticker";if((a==null?void 0:a.imageMessage)!=null)return"image";if((a==null?void 0:a.extendedContentMessage)!=null)return"xma-image";return}g.getMediaTypeFromConsumerMessage=a}),98);
__d("maybeConvertMessageTextMentionsV2ToV1",["WACommon.pb"],(function(a,b,c,d,e,f,g){function a(a){if(a==null||a.text==null||a.mentions==null||a.mentions.length===0)return a;var b=a.text,c=[],e=[],f=0;for(var g of a.mentions){var h=g.offset,i=g.length,j=g.mentionedJid,k=g.mentionType;if(k!==d("WACommon.pb").MENTION_MENTION_TYPE.PROFILE||h==null||i==null||j==null)continue;e.push(j+"@msgr");c.push(b.substring(f,h));c.push("@"+j+"@msgr");f=h+i}if(e.length===0)return a;c.push(b.substring(f));return babelHelpers["extends"]({},a,{text:c.join(""),mentionedJid:e,mentions:[]})}g["default"]=a}),98);